<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rippled: Ledger.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rippled
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_df9c78dcf3f59a33b12284f95992a64b.html">ripple</a></li><li class="navelem"><a class="el" href="dir_9f69212e4c6e2ca9ec5ab59cd7b6275c.html">app</a></li><li class="navelem"><a class="el" href="dir_796f40347441ba166e244d2eadcd4ae1.html">ledger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Ledger.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    This file is part of rippled: https://github.com/ripple/rippled</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    Copyright (c) 2012, 2013 Ripple Labs Inc.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    purpose  with  or without fee is hereby granted, provided that the above</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    THE  SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    WITH  REGARD  TO  THIS  SOFTWARE  INCLUDING  ALL  IMPLIED  WARRANTIES  OF</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    MERCHANTABILITY  AND  FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    ANY  SPECIAL ,  DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    WHATSOEVER  RESULTING  FROM  LOSS  OF USE, DATA OR PROFITS, WHETHER IN AN</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    ACTION  OF  CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/AcceptedLedger.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/InboundLedgers.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/Ledger.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/LedgerMaster.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/LedgerToJson.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/OrderBookDB.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/PendingSaves.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;ripple/app/ledger/TransactionMaster.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;ripple/app/main/Application.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;ripple/app/misc/HashRouter.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;ripple/app/misc/LoadFeeTrack.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;ripple/app/misc/NetworkOPs.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;ripple/app/rdb/backend/RelationalDBInterfacePostgres.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;ripple/app/rdb/backend/RelationalDBInterfaceSqlite.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;ripple/basics/Log.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;ripple/basics/StringUtilities.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;ripple/basics/contract.h&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;ripple/beast/core/LexicalCast.h&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;ripple/consensus/LedgerTiming.h&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;ripple/core/Config.h&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;ripple/core/JobQueue.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;ripple/core/Pg.h&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;ripple/core/SociDB.h&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;ripple/json/to_string.h&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;ripple/nodestore/Database.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/Feature.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/HashPrefix.h&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/Indexes.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/PublicKey.h&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/SecretKey.h&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/UintTypes.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/digest.h&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;ripple/protocol/jss.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;boost/optional.hpp&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/cassert.html">cassert</a>&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/utility.html">utility</a>&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://en.cppreference.com/w/cpp/header/vector.html">vector</a>&gt;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;ripple/nodestore/impl/DatabaseNodeImp.h&gt;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceripple.html">ripple</a> {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">   62</a></span>&#160;<a class="code" href="structripple_1_1create__genesis__t.html">create_genesis_t</a> <span class="keyword">const</span> <a class="code" href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">create_genesis</a>{};</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="namespaceripple.html#a356c68147333a9a48a344718038576d9">uint256</a></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">   65</a></span>&#160;<a class="code" href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">calculateLedgerHash</a>(<a class="code" href="structripple_1_1LedgerInfo.html">LedgerInfo</a> <span class="keyword">const</span>&amp; info)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// VFALCO This has to match addRaw in View.h.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceripple.html#ae3f5bc352766a1a8dbf5270eb7dbc2e7">sha512Half</a>(</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="namespaceripple.html#ad5143ceada01141772ae4aab984f94bda7fa2267e9b1bf739a70bb1860ab2a99c">HashPrefix::ledgerMaster</a>,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint64_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#ad789f949fc35acd576aac965b20aaaca">drops</a>.<a class="code" href="classripple_1_1XRPAmount.html#a8a65b5528d6021159c5b8772aa86cfc1">drops</a>()),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        info.<a class="code" href="structripple_1_1LedgerInfo.html#a5c129196edfd78e992f81959f075e5ca">parentHash</a>,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        info.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a>,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        info.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#a3f7b6fb6d401cfc76e0179b061e02eb4">parentCloseTime</a>.<a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch.html">time_since_epoch</a>().count()),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a>.<a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch.html">time_since_epoch</a>().count()),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint8_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a>.<a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration/count.html">count</a>()),</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint8_t</a>(info.<a class="code" href="structripple_1_1LedgerInfo.html#a279f72e0664518d5fccd52ed7a92e0da">closeFlags</a>));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html">   83</a></span>&#160;<span class="keyword">class </span><a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html">Ledger::sles_iter_impl</a> : <span class="keyword">public</span> sles_type::iter_base</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">   86</a></span>&#160;    <a class="code" href="classripple_1_1SHAMap_1_1const__iterator.html">SHAMap::const_iterator</a> <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">iter_</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#ae1019337912248ae4c0c55fd613ff726">sles_iter_impl</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html">sles_iter_impl</a>&amp;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acda0c84e430ff61b71edb7bd155c7fd7">operator=</a>(<a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html">sles_iter_impl</a> <span class="keyword">const</span>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#ae1019337912248ae4c0c55fd613ff726">sles_iter_impl</a>(<a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html">sles_iter_impl</a> <span class="keyword">const</span>&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#aa91905044d536f487674eb4e9edad2dd">   95</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#aa91905044d536f487674eb4e9edad2dd">sles_iter_impl</a>(<a class="code" href="classripple_1_1SHAMap_1_1const__iterator.html">SHAMap::const_iterator</a> iter) : <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">iter_</a>(iter)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr&lt;base_type&gt;</a></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#a0adbe4008ec68f0ae01b503356c35abb">  100</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#a0adbe4008ec68f0ae01b503356c35abb">copy</a>()<span class="keyword"> const override</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> std::make_unique&lt;sles_iter_impl&gt;(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acb3327c3b6206bac3d509d23ada2e831">  106</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acb3327c3b6206bac3d509d23ada2e831">equal</a>(base_type <span class="keyword">const</span>&amp; impl)<span class="keyword"> const override</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> <span class="keyword">const</span> p = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html">sles_iter_impl</a> const*<span class="keyword">&gt;</span>(&amp;impl))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">iter_</a> == p-&gt;iter_;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#ab913201f79f9497327a00d09250f060d">  114</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#ab913201f79f9497327a00d09250f060d">increment</a>()<span class="keyword"> override</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        ++<a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">iter_</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="classripple_1_1detail_1_1ReadViewFwdRange.html#ae3a9cd029d3f92eac0dfe4d2515572e3">sles_type::value_type</a></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1sles__iter__impl.html#a665f0643d3b6c86e42df3453dc634761">  120</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#a665f0643d3b6c86e42df3453dc634761">dereference</a>()<span class="keyword"> const override</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> item = *<a class="code" href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">iter_</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="classripple_1_1SerialIter.html">SerialIter</a> sit(item.slice());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">return</span> std::make_shared&lt;SLE const&gt;(sit, item.key());</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;};</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html">  130</a></span>&#160;<span class="keyword">class </span><a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html">Ledger::txs_iter_impl</a> : <span class="keyword">public</span> txs_type::iter_base</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a7840997ea1a065fd634c1ed715c5b327">  133</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a7840997ea1a065fd634c1ed715c5b327">metadata_</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">  134</a></span>&#160;    <a class="code" href="classripple_1_1SHAMap_1_1const__iterator.html">SHAMap::const_iterator</a> <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">iter_</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a491ee5f53e571bcc2f30fb22f98bf2ea">txs_iter_impl</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html">txs_iter_impl</a>&amp;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#abb153a1774b651b6784b4103ee69bc6c">operator=</a>(<a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html">txs_iter_impl</a> <span class="keyword">const</span>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a491ee5f53e571bcc2f30fb22f98bf2ea">txs_iter_impl</a>(<a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html">txs_iter_impl</a> <span class="keyword">const</span>&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c90a5db622af7862c7e570e4d29cff5">  143</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c90a5db622af7862c7e570e4d29cff5">txs_iter_impl</a>(<span class="keywordtype">bool</span> metadata, <a class="code" href="classripple_1_1SHAMap_1_1const__iterator.html">SHAMap::const_iterator</a> iter)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        : <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a7840997ea1a065fd634c1ed715c5b327">metadata_</a>(metadata), <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">iter_</a>(iter)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr&lt;base_type&gt;</a></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a67e2c3beee9e7b8e7492d6e1fa51163e">  149</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a67e2c3beee9e7b8e7492d6e1fa51163e">copy</a>()<span class="keyword"> const override</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> std::make_unique&lt;txs_iter_impl&gt;(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8b25859915691946909c9fc87db55753">  155</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8b25859915691946909c9fc87db55753">equal</a>(base_type <span class="keyword">const</span>&amp; impl)<span class="keyword"> const override</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> <span class="keyword">const</span> p = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html">txs_iter_impl</a> const*<span class="keyword">&gt;</span>(&amp;impl))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">iter_</a> == p-&gt;iter_;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c6b87e4c02e4538f5c86b8aa8f553a9">  163</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c6b87e4c02e4538f5c86b8aa8f553a9">increment</a>()<span class="keyword"> override</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        ++<a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">iter_</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="classripple_1_1detail_1_1ReadViewFwdRange.html#ae3a9cd029d3f92eac0dfe4d2515572e3">txs_type::value_type</a></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8525f8ae51dd1e6f0e5a225a3eb207d4">  169</a></span>&#160;    <a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8525f8ae51dd1e6f0e5a225a3eb207d4">dereference</a>()<span class="keyword"> const override</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> item = *<a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">iter_</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger_1_1txs__iter__impl.html#a7840997ea1a065fd634c1ed715c5b327">metadata_</a>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">deserializeTxPlusMeta</a>(item);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">return</span> {<a class="code" href="namespaceripple.html#a224ce479b5c4267f2863235a53508803">deserializeTx</a>(item), <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;};</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a7de739034e7b50f529bb0169fe2ff3c4">  180</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">Ledger::Ledger</a>(</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="structripple_1_1create__genesis__t.html">create_genesis_t</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a> <span class="keyword">const</span>&amp; amendments,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classripple_1_1Family.html">Family</a>&amp; family)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    : mImmutable(false)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    , txMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">TRANSACTION</a>, family))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    , stateMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">STATE</a>, family))</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    , rules_{config.<a class="code" href="classripple_1_1Config.html#ad053293ba571075ebfa6f086ed70fdc5">features</a>}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    info_.seq = 1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    info_.drops = <a class="code" href="namespaceripple.html#a55a2a537e79363b71783d5f6eaca5abf">INITIAL_XRP</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    info_.closeTimeResolution = <a class="code" href="namespaceripple.html#a09147d6c9f73ea585dcd8d71779102a0">ledgerGenesisTimeResolution</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">static</span> <span class="keyword">auto</span> <span class="keyword">const</span> <span class="keywordtype">id</span> = <a class="code" href="namespaceripple.html#a614d8681c8dff84ac2257939751987c5">calcAccountID</a>(</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="namespaceripple.html#a355ec605d1063c4316b6f1480359da19">generateKeyPair</a>(<a class="code" href="namespaceripple.html#a9de744cfdefe1132969eb982e57e4ddea82c2b7829b8129e5a2d53665ba4b4757">KeyType::secp256k1</a>, <a class="code" href="namespaceripple.html#a50df1a645790d124729a6ed973edf519">generateSeed</a>(<span class="stringliteral">&quot;masterpassphrase&quot;</span>))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            .first);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> sle = std::make_shared&lt;SLE&gt;(<a class="code" href="namespaceripple_1_1keylet.html#a50c370db96b4fdcdd202d9c2c38afce9">keylet::account</a>(<span class="keywordtype">id</span>));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        sle-&gt;setFieldU32(<a class="code" href="namespaceripple.html#a586714bf3cbbbb406d6f169742bce0d5">sfSequence</a>, 1);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        sle-&gt;setAccountID(<a class="code" href="namespaceripple.html#a5bab99595719d22579e10d21cf048eb0">sfAccount</a>, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        sle-&gt;setFieldAmount(<a class="code" href="namespaceripple.html#ab8a9c54401e8209fca7396c6b9c610f4">sfBalance</a>, info_.drops);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        rawInsert(sle);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (!amendments.empty())</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> sle = std::make_shared&lt;SLE&gt;(<a class="code" href="namespaceripple_1_1keylet.html#a5660f18c64be5f8270fe66fcc25d0de8">keylet::amendments</a>());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        sle-&gt;setFieldV256(<a class="code" href="namespaceripple.html#a0b616ffc6eaba434ad7f8b79289ee71f">sfAmendments</a>, STVector256{amendments});</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        rawInsert(sle);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    stateMap_-&gt;flushDirty(<a class="code" href="namespaceripple.html#a57d7e7b27df7e719fdf5569f96be60a3a65cfe147458030070724c8b3795e508f">hotACCOUNT_NODE</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    setImmutable(config);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#ac121f3f89c96ecc33f11372d4c033c50">  216</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">Ledger::Ledger</a>(</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="structripple_1_1LedgerInfo.html">LedgerInfo</a> <span class="keyword">const</span>&amp; info,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">bool</span>&amp; loaded,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">bool</span> acquire,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classripple_1_1Family.html">Family</a>&amp; family,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classbeast_1_1Journal.html">beast::Journal</a> j)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    : mImmutable(true)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    , txMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">TRANSACTION</a>,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          info.txHash,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          family))</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    , stateMap_(</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          <a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">STATE</a>, info.accountHash, family))</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    , rules_(config.features)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    , info_(info)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    loaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a>.<a class="code" href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">isNonZero</a>() &amp;&amp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        !<a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;fetchRoot(<a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{info_.txHash}, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (config.<a class="code" href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">reporting</a>())</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment">// Reporting should never have incomplete data</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            Throw&lt;std::runtime_error&gt;(<span class="stringliteral">&quot;Missing tx map root for ledger&quot;</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        loaded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        JLOG(j.<a class="code" href="classbeast_1_1Journal.html#ad8fefe3e8ad583e1ed1bf02094ac3d8f">warn</a>()) &lt;&lt; <span class="stringliteral">&quot;Don&#39;t have transaction root for ledger&quot;</span> &lt;&lt; <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>.<a class="code" href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">isNonZero</a>() &amp;&amp;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        !<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;fetchRoot(<a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{info_.accountHash}, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (config.<a class="code" href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">reporting</a>())</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="comment">// Reporting should never have incomplete data</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            Throw&lt;std::runtime_error&gt;(<span class="stringliteral">&quot;Missing state map root for ledger&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        loaded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        JLOG(j.<a class="code" href="classbeast_1_1Journal.html#ad8fefe3e8ad583e1ed1bf02094ac3d8f">warn</a>()) &lt;&lt; <span class="stringliteral">&quot;Don&#39;t have state data root for ledger&quot;</span> &lt;&lt; <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;setImmutable();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;setImmutable();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a0003b028844c6ac875b7c5f328d0c92e">setup</a>(config))</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        loaded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (!loaded)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a> = <a class="code" href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">calculateLedgerHash</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceripple.html#a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144">acquire</a> &amp;&amp; !config.<a class="code" href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">reporting</a>())</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            family.<a class="code" href="classripple_1_1Family.html#a195ad5c61d5ef6a5b269232ecea7ca55">missingNode</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a>, <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// Create a new ledger that follows this one</span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#aa76cceb54a9c140a0754ff6b39341991">  274</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">Ledger::Ledger</a>(<a class="code" href="classripple_1_1Ledger.html">Ledger</a> <span class="keyword">const</span>&amp; prevLedger, <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point.html">NetClock::time_point</a> closeTime)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    : mImmutable(false)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    , txMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          <a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">TRANSACTION</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          prevLedger.stateMap_-&gt;family()))</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    , stateMap_(prevLedger.stateMap_-&gt;snapShot(true))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    , fees_(prevLedger.fees_)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    , rules_(prevLedger.rules_)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> + 1;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a3f7b6fb6d401cfc76e0179b061e02eb4">parentCloseTime</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a> + <a class="code" href="namespaceripple.html#a356c68147333a9a48a344718038576d9">uint256</a>(1);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#ad789f949fc35acd576aac965b20aaaca">drops</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#ad789f949fc35acd576aac965b20aaaca">drops</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a5c129196edfd78e992f81959f075e5ca">parentHash</a> = prevLedger.<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a> = <a class="code" href="namespaceripple.html#a769291ba9f7a5f5ba7a389c395e83a3c">getNextLedgerTimeResolution</a>(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a>,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="namespaceripple.html#a2bb299a1db65861baa4c6c1c91cf336f">getCloseAgree</a>(prevLedger.<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>()),</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a> == <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point.html">NetClock::time_point</a>{})</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a> = <a class="code" href="namespaceripple.html#aebcad336ac983e05caf01c53d1cacde7">roundCloseTime</a>(closeTime, <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a> =</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            prevLedger.<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a> + <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a4eee0d21d2b6be7b96d7526662fc0507">  305</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">Ledger::Ledger</a>(<a class="code" href="structripple_1_1LedgerInfo.html">LedgerInfo</a> <span class="keyword">const</span>&amp; info, <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config, <a class="code" href="classripple_1_1Family.html">Family</a>&amp; family)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    : mImmutable(true)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    , txMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">TRANSACTION</a>,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          info.txHash,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          family))</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    , stateMap_(</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          <a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">STATE</a>, info.accountHash, family))</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    , rules_{config.<a class="code" href="classripple_1_1Config.html#ad053293ba571075ebfa6f086ed70fdc5">features</a>}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    , info_(info)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    info_.hash = <a class="code" href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">calculateLedgerHash</a>(info_);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a1a17dd0f07945824e5d8ba8c91ce0757">  319</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">Ledger::Ledger</a>(</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> ledgerSeq,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point.html">NetClock::time_point</a> closeTime,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classripple_1_1Family.html">Family</a>&amp; family)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    : mImmutable(false)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    , txMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">TRANSACTION</a>, family))</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    , stateMap_(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="classripple_1_1SHAMap.html">SHAMap</a>&gt;(<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">SHAMapType</a>::<a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">STATE</a>, family))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    , rules_{config.<a class="code" href="classripple_1_1Config.html#ad053293ba571075ebfa6f086ed70fdc5">features</a>}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    info_.seq = ledgerSeq;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    info_.closeTime = closeTime;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    info_.closeTimeResolution = <a class="code" href="namespaceripple.html#a8d9f578e31d5fdf0e82150bc1a4ce374">ledgerDefaultTimeResolution</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    setup(config);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a87ea8cee44207987a9d9ac826aacc831">  336</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a87ea8cee44207987a9d9ac826aacc831">Ledger::setImmutable</a>(<a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config, <span class="keywordtype">bool</span> rehash)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// Force update, since this is the only</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// place the hash transitions to valid</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a57a48cb61be7affac6c4423d1317c5f8">mImmutable</a> &amp;&amp; rehash)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a> = <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;getHash().as_uint256();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a> = <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;getHash().as_uint256();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (rehash)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a> = <a class="code" href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">calculateLedgerHash</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a57a48cb61be7affac6c4423d1317c5f8">mImmutable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;setImmutable();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;setImmutable();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a0003b028844c6ac875b7c5f328d0c92e">setup</a>(config);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#acbcedaa40d8162271cb6e6f37f549e5f">  356</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#acbcedaa40d8162271cb6e6f37f549e5f">Ledger::setAccepted</a>(</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/time_point.html">NetClock::time_point</a> closeTime,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/duration.html">NetClock::duration</a> closeResolution,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">bool</span> correctCloseTime,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// Used when we witnessed the consensus.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    assert(!<a class="code" href="classripple_1_1Ledger.html#a131fb72a0a470e6b493865f9a06762c4">open</a>());</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">closeTime</a> = closeTime;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">closeTimeResolution</a> = closeResolution;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a279f72e0664518d5fccd52ed7a92e0da">closeFlags</a> = correctCloseTime ? 0 : <a class="code" href="namespaceripple.html#a5dcc3d768f53682f15005454f36248bf">sLCF_NoConsensusTime</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a87ea8cee44207987a9d9ac826aacc831">setImmutable</a>(config);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#aef7b9a3e3b4fd553e0a9db4ff1e7a8a7">  372</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#aef7b9a3e3b4fd553e0a9db4ff1e7a8a7">Ledger::addSLE</a>(<a class="code" href="classripple_1_1STLedgerEntry.html">SLE</a> <span class="keyword">const</span>&amp; sle)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> s = sle.<a class="code" href="classripple_1_1STObject.html#a6ae7e459a83bc46c3cfd9025753af1cb">getSerializer</a>();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="classripple_1_1SHAMapItem.html">SHAMapItem</a> item(sle.<a class="code" href="classripple_1_1STLedgerEntry.html#a6387602187c2ca4e22297d5c908cbad6">key</a>(), s.slice());</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;addItem(<a class="code" href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58ab2364e40a67b08ba6170314afc07d07b">SHAMapNodeType::tnACCOUNT_STATE</a>, std::move(item));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STTx const&gt;</a></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="namespaceripple.html#a224ce479b5c4267f2863235a53508803">  382</a></span>&#160;<a class="code" href="namespaceripple.html#a224ce479b5c4267f2863235a53508803">deserializeTx</a>(<a class="code" href="classripple_1_1SHAMapItem.html">SHAMapItem</a> <span class="keyword">const</span>&amp; item)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classripple_1_1SerialIter.html">SerialIter</a> sit(item.<a class="code" href="classripple_1_1SHAMapItem.html#a3f52867a7d3829faede60bf7dd5628ba">slice</a>());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">return</span> std::make_shared&lt;STTx const&gt;(sit);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair&lt;std::shared_ptr&lt;STTx const&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STObject const&gt;</a>&gt;</div>
<div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">  389</a></span>&#160;<a class="code" href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">deserializeTxPlusMeta</a>(<a class="code" href="classripple_1_1SHAMapItem.html">SHAMapItem</a> <span class="keyword">const</span>&amp; item)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;{</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair&lt;std::shared_ptr&lt;STTx const&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STObject const&gt;</a>&gt;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        result;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="classripple_1_1SerialIter.html">SerialIter</a> sit(item.<a class="code" href="classripple_1_1SHAMapItem.html#a3f52867a7d3829faede60bf7dd5628ba">slice</a>());</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="classripple_1_1SerialIter.html">SerialIter</a> s(sit.<a class="code" href="classripple_1_1SerialIter.html#a4131424f0e083369a1e562a5437d56e8">getSlice</a>(sit.<a class="code" href="classripple_1_1SerialIter.html#aa97628bd129c57f172027982c0ac4f1f">getVLDataLength</a>()));</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        result.<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">first</a> = std::make_shared&lt;STTx const&gt;(s);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="classripple_1_1SerialIter.html">SerialIter</a> s(sit.<a class="code" href="classripple_1_1SerialIter.html#a4131424f0e083369a1e562a5437d56e8">getSlice</a>(sit.<a class="code" href="classripple_1_1SerialIter.html#aa97628bd129c57f172027982c0ac4f1f">getVLDataLength</a>()));</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        result.<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">second</a> = std::make_shared&lt;STObject const&gt;(s, <a class="code" href="namespaceripple.html#a1565922b53abf78b7587a6e60d8d24ba">sfMetadata</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a196e844a1c5a015af934bd864690a1e2">  408</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a196e844a1c5a015af934bd864690a1e2">Ledger::exists</a>(<a class="code" href="structripple_1_1Keylet.html">Keylet</a> <span class="keyword">const</span>&amp; k)<span class="keyword"> const</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// VFALCO NOTE Perhaps check the type for debug builds?</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;hasItem(k.<a class="code" href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">key</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#afbe0e4067ff6bcaf7df2b690ea15e204">  415</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a196e844a1c5a015af934bd864690a1e2">Ledger::exists</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key)<span class="keyword"> const</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;hasItem(key);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;uint256&gt;</a></div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#ae0a63c9a1943ea6a18726df087a37bdc">  421</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#ae0a63c9a1943ea6a18726df087a37bdc">Ledger::succ</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key, <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;uint256&gt;</a> <span class="keyword">const</span>&amp; last)<span class="keyword"> const</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">auto</span> item = <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;upper_bound(key);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (item == <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;end())</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (last &amp;&amp; item-&gt;key() &gt;= last)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> item-&gt;key();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE const&gt;</a></div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">  432</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">Ledger::read</a>(<a class="code" href="structripple_1_1Keylet.html">Keylet</a> <span class="keyword">const</span>&amp; k)<span class="keyword"> const</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (k.<a class="code" href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">key</a> == beast::zero)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; item = <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;peekItem(k.<a class="code" href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">key</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (!item)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">auto</span> sle = std::make_shared&lt;SLE&gt;(<a class="code" href="classripple_1_1SerialIter.html">SerialIter</a>{item-&gt;slice()}, item-&gt;key());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> (!k.<a class="code" href="structripple_1_1Keylet.html#a1e8ccd4a50a894a338c789fc566d8802">check</a>(*sle))</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> sle;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#aa83dfb46c969cf85cba5ca889b5cf7d6">  451</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#aa83dfb46c969cf85cba5ca889b5cf7d6">Ledger::slesBegin</a>() const -&gt; <a class="code" href="namespacestd.html">std</a>::unique_ptr&lt;<a class="code" href="structripple_1_1ReadView_1_1sles__type.html">sles_type</a>::iter_base&gt;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;sles_iter_impl&gt;(<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;begin());</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a220660a0e999b374e502b117ae93833f">  457</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a220660a0e999b374e502b117ae93833f">Ledger::slesEnd</a>() const -&gt; <a class="code" href="namespacestd.html">std</a>::unique_ptr&lt;<a class="code" href="structripple_1_1ReadView_1_1sles__type.html">sles_type</a>::iter_base&gt;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;sles_iter_impl&gt;(<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;end());</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a0b300e04e1cd2c608710d02467f4e7be">  463</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a0b300e04e1cd2c608710d02467f4e7be">Ledger::slesUpperBound</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key) <span class="keyword">const</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    -&gt; <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr&lt;sles_type::iter_base&gt;</a></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;sles_iter_impl&gt;(stateMap_-&gt;upper_bound(key));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#ad0ae3a298b1fc8b7b45524f86fed514f">  470</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#ad0ae3a298b1fc8b7b45524f86fed514f">Ledger::txsBegin</a>() const -&gt; <a class="code" href="namespacestd.html">std</a>::unique_ptr&lt;<a class="code" href="structripple_1_1ReadView_1_1txs__type.html">txs_type</a>::iter_base&gt;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;txs_iter_impl&gt;(!<a class="code" href="classripple_1_1Ledger.html#a131fb72a0a470e6b493865f9a06762c4">open</a>(), <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;begin());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#acaf4d523fa7525606f7b1e576cf048c5">  476</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#acaf4d523fa7525606f7b1e576cf048c5">Ledger::txsEnd</a>() const -&gt; <a class="code" href="namespacestd.html">std</a>::unique_ptr&lt;<a class="code" href="structripple_1_1ReadView_1_1txs__type.html">txs_type</a>::iter_base&gt;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;txs_iter_impl&gt;(!<a class="code" href="classripple_1_1Ledger.html#a131fb72a0a470e6b493865f9a06762c4">open</a>(), <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;end());</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a46a546d8198b17cb9dff3036d920eee4">  482</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a46a546d8198b17cb9dff3036d920eee4">Ledger::txExists</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key)<span class="keyword"> const</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;hasItem(key);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a6cf0862134638e77b99e53c25c41f3a9">  488</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a6cf0862134638e77b99e53c25c41f3a9">Ledger::txRead</a>(<a class="code" href="classripple_1_1base__uint.html">key_type</a> <span class="keyword">const</span>&amp; key) <span class="keyword">const</span> -&gt; <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">tx_type</a></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    assert(txMap_);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; item = txMap_-&gt;peekItem(key);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (!item)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">open</a>())</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keyword">auto</span> result = <a class="code" href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">deserializeTxPlusMeta</a>(*item);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">return</span> {std::move(result.first), std::move(result.second)};</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespaceripple.html#a224ce479b5c4267f2863235a53508803">deserializeTx</a>(*item), <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="keyword">auto</span></div>
<div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a68cfe4a8abf683e2d6909f0d96013d8f">  503</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a68cfe4a8abf683e2d6909f0d96013d8f">Ledger::digest</a>(<a class="code" href="classripple_1_1base__uint.html">key_type</a> <span class="keyword">const</span>&amp; key) <span class="keyword">const</span> -&gt; <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;digest_type&gt;</a></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a> <a class="code" href="namespaceripple.html#a91e9fe7a4e92dba79c3812fd3edcaacc">digest</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// VFALCO Unfortunately this loads the item</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">//        from the NodeStore needlessly.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!stateMap_-&gt;peekItem(key, <a class="code" href="namespaceripple.html#a91e9fe7a4e92dba79c3812fd3edcaacc">digest</a>))</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceripple.html#a91e9fe7a4e92dba79c3812fd3edcaacc">digest</a>.as_uint256();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">  516</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">Ledger::rawErase</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a> <span class="keyword">const</span>&amp; sle)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;delItem(sle-&gt;key()))</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;Ledger::rawErase: key not found&quot;</span>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a622822ce3fa75f28b3c7a3edcf7ed9bc">  523</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">Ledger::rawErase</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;delItem(key))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;Ledger::rawErase: key not found&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a7ed6dcfefe77ee7b9e90e052df79e52d">  530</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a7ed6dcfefe77ee7b9e90e052df79e52d">Ledger::rawInsert</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a> <span class="keyword">const</span>&amp; sle)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;{</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="classripple_1_1Serializer.html">Serializer</a> ss;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    sle-&gt;add(ss);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;addGiveItem(</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <a class="code" href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58ab2364e40a67b08ba6170314afc07d07b">SHAMapNodeType::tnACCOUNT_STATE</a>,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            std::make_shared&lt;SHAMapItem const&gt;(sle-&gt;key(), ss.<a class="code" href="classripple_1_1Serializer.html#a394c3299f6cfcebdaa4bc98ec0c602d6">slice</a>())))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;Ledger::rawInsert: key already exists&quot;</span>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">  541</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">Ledger::rawReplace</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a> <span class="keyword">const</span>&amp; sle)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="classripple_1_1Serializer.html">Serializer</a> ss;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    sle-&gt;add(ss);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;updateGiveItem(</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <a class="code" href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58ab2364e40a67b08ba6170314afc07d07b">SHAMapNodeType::tnACCOUNT_STATE</a>,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            std::make_shared&lt;SHAMapItem const&gt;(sle-&gt;key(), ss.<a class="code" href="classripple_1_1Serializer.html#a394c3299f6cfcebdaa4bc98ec0c602d6">slice</a>())))</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;Ledger::rawReplace: key not found&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a0432690b8a2af03cd14cf6c07561ea53">  552</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a0432690b8a2af03cd14cf6c07561ea53">Ledger::rawTxInsert</a>(</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Serializer const&gt;</a> <span class="keyword">const</span>&amp; txn,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Serializer const&gt;</a> <span class="keyword">const</span>&amp; metaData)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    assert(metaData);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// low-level - just add to table</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="classripple_1_1Serializer.html">Serializer</a> s(txn-&gt;getDataLength() + metaData-&gt;getDataLength() + 16);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    s.<a class="code" href="classripple_1_1Serializer.html#a9d465161cb77936bd75a3d034d2b5b72">addVL</a>(txn-&gt;peekData());</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    s.<a class="code" href="classripple_1_1Serializer.html#a9d465161cb77936bd75a3d034d2b5b72">addVL</a>(metaData-&gt;peekData());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#adefba8f4497f8dc4554dc1e7026e05a2">txMap</a>().addGiveItem(</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <a class="code" href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58a5065e45315e5eab27c63b2dabd8ad150">SHAMapNodeType::tnTRANSACTION_MD</a>,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            std::make_shared&lt;SHAMapItem const&gt;(key, s.<a class="code" href="classripple_1_1Serializer.html#a394c3299f6cfcebdaa4bc98ec0c602d6">slice</a>())))</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;duplicate_tx: &quot;</span> + <a class="code" href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">to_string</a>(key));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<a class="code" href="classripple_1_1base__uint.html">uint256</a></div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#aa7a5631ff08a7cf45c966d70fd9d3f01">  570</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#aa7a5631ff08a7cf45c966d70fd9d3f01">Ledger::rawTxInsertWithHash</a>(</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; key,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Serializer const&gt;</a> <span class="keyword">const</span>&amp; txn,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Serializer const&gt;</a> <span class="keyword">const</span>&amp; metaData)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    assert(metaData);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// low-level - just add to table</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="classripple_1_1Serializer.html">Serializer</a> s(txn-&gt;getDataLength() + metaData-&gt;getDataLength() + 16);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    s.<a class="code" href="classripple_1_1Serializer.html#a9d465161cb77936bd75a3d034d2b5b72">addVL</a>(txn-&gt;peekData());</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    s.<a class="code" href="classripple_1_1Serializer.html#a9d465161cb77936bd75a3d034d2b5b72">addVL</a>(metaData-&gt;peekData());</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">auto</span> item = std::make_shared&lt;SHAMapItem const&gt;(key, s.<a class="code" href="classripple_1_1Serializer.html#a394c3299f6cfcebdaa4bc98ec0c602d6">slice</a>());</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keyword">auto</span> hash = <a class="code" href="namespaceripple.html#ae3f5bc352766a1a8dbf5270eb7dbc2e7">sha512Half</a>(<a class="code" href="namespaceripple.html#ad5143ceada01141772ae4aab984f94bda555f976fd82d9e7e487770c44c7980bf">HashPrefix::txNode</a>, item-&gt;slice(), item-&gt;key());</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classripple_1_1Ledger.html#adefba8f4497f8dc4554dc1e7026e05a2">txMap</a>().addGiveItem(<a class="code" href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58a5065e45315e5eab27c63b2dabd8ad150">SHAMapNodeType::tnTRANSACTION_MD</a>, std::move(item)))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">LogicError</a>(<span class="stringliteral">&quot;duplicate_tx: &quot;</span> + <a class="code" href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">to_string</a>(key));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> hash;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a0003b028844c6ac875b7c5f328d0c92e">  590</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a0003b028844c6ac875b7c5f328d0c92e">Ledger::setup</a>(<a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a64c9587f977c872e926a58401d7d8224">base</a> = config.<a class="code" href="classripple_1_1Config.html#ad12fcadf97f74076f421712b8c95902e">FEE_DEFAULT</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a28da1f454fe1897cadd3813aaaad4eb7">units</a> = config.<a class="code" href="classripple_1_1Config.html#a7e0651d3c35f2ad3105b673dd4430833">TRANSACTION_FEE_BASE</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a75648591a2d5bc9e670f1f4081bfdfe0">reserve</a> = config.<a class="code" href="classripple_1_1Config.html#a2ef24c92845b20ec8be2f79fc9dba500">FEE_ACCOUNT_RESERVE</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a6d48ec23cfbe4eacac46fbfaa8ce67f9">increment</a> = config.<a class="code" href="classripple_1_1Config.html#afa4d9ecf1f0056fb1709770696b036f0">FEE_OWNER_RESERVE</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> <span class="keyword">const</span> sle = <a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#ac58ecac7b057504ea6c1706c0ee04623">keylet::fees</a>()))</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">// VFALCO NOTE Why getFieldIndex and not isFieldPresent?</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="keywordflow">if</span> (sle-&gt;getFieldIndex(<a class="code" href="namespaceripple.html#a1deca314689daca8b7eb3df5ffd53b74">sfBaseFee</a>) != -1)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a64c9587f977c872e926a58401d7d8224">base</a> = sle-&gt;getFieldU64(<a class="code" href="namespaceripple.html#a1deca314689daca8b7eb3df5ffd53b74">sfBaseFee</a>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">if</span> (sle-&gt;getFieldIndex(<a class="code" href="namespaceripple.html#a4b768acab2bb710274a46ca13815564f">sfReferenceFeeUnits</a>) != -1)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a28da1f454fe1897cadd3813aaaad4eb7">units</a> = sle-&gt;getFieldU32(<a class="code" href="namespaceripple.html#a4b768acab2bb710274a46ca13815564f">sfReferenceFeeUnits</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">if</span> (sle-&gt;getFieldIndex(<a class="code" href="namespaceripple.html#a9155cdcb2a25876442863f8a8aaee0af">sfReserveBase</a>) != -1)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a75648591a2d5bc9e670f1f4081bfdfe0">reserve</a> = sle-&gt;getFieldU32(<a class="code" href="namespaceripple.html#a9155cdcb2a25876442863f8a8aaee0af">sfReserveBase</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">if</span> (sle-&gt;getFieldIndex(<a class="code" href="namespaceripple.html#af14fef7bb70d9e685fdd0df4efc112bf">sfReserveIncrement</a>) != -1)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <a class="code" href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">fees_</a>.<a class="code" href="structripple_1_1Fees.html#a6d48ec23cfbe4eacac46fbfaa8ce67f9">increment</a> = sle-&gt;getFieldU32(<a class="code" href="namespaceripple.html#af14fef7bb70d9e685fdd0df4efc112bf">sfReserveIncrement</a>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="classripple_1_1SHAMapMissingNode.html">SHAMapMissingNode</a> <span class="keyword">const</span>&amp;)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">catch</span> (<a class="codeRef" href="http://en.cppreference.com/w/cpp/error/exception.html">std::exception</a> <span class="keyword">const</span>&amp;)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="namespaceripple.html#ad99788f1aca6ce31a1fe8365eee1bba3">Rethrow</a>();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#af4bf506cca6878c107a9f4bc44570b0c">rules_</a> = <a class="code" href="classripple_1_1Rules.html">Rules</a>(*<span class="keyword">this</span>, config.<a class="code" href="classripple_1_1Config.html#ad053293ba571075ebfa6f086ed70fdc5">features</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="classripple_1_1SHAMapMissingNode.html">SHAMapMissingNode</a> <span class="keyword">const</span>&amp;)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">catch</span> (<a class="codeRef" href="http://en.cppreference.com/w/cpp/error/exception.html">std::exception</a> <span class="keyword">const</span>&amp;)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="namespaceripple.html#ad99788f1aca6ce31a1fe8365eee1bba3">Rethrow</a>();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;SLE&gt;</a></div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">  644</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">Ledger::peek</a>(<a class="code" href="structripple_1_1Keylet.html">Keylet</a> <span class="keyword">const</span>&amp; k)<span class="keyword"> const</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; value = <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;peekItem(k.<a class="code" href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">key</a>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (!value)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keyword">auto</span> sle = std::make_shared&lt;SLE&gt;(<a class="code" href="classripple_1_1SerialIter.html">SerialIter</a>{value-&gt;slice()}, value-&gt;key());</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (!k.<a class="code" href="structripple_1_1Keylet.html#a1e8ccd4a50a894a338c789fc566d8802">check</a>(*sle))</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> sle;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/unordered_set.html">hash_set&lt;PublicKey&gt;</a></div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a45759e4c24e5344b58ae80158834d8ec">  656</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a45759e4c24e5344b58ae80158834d8ec">Ledger::negativeUNL</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/unordered_set.html">hash_set&lt;PublicKey&gt;</a> negUnl;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#a53590de263224dde45f4856da2852319">keylet::negativeUNL</a>());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        sle &amp;&amp; sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">sfDisabledValidators</a>))</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span>&amp; nUnlData = sle-&gt;getFieldArray(<a class="code" href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">sfDisabledValidators</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; n : nUnlData)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">if</span> (n.isFieldPresent(<a class="code" href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">sfPublicKey</a>))</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keyword">auto</span> d = n.getFieldVL(<a class="code" href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">sfPublicKey</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="keyword">auto</span> s = <a class="code" href="namespaceripple.html#aabe37451093c21757855542d68fba3ce">makeSlice</a>(d);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespaceripple.html#adc1f8a2c9b47d7c08e671ad3473e9d3a">publicKeyType</a>(s))</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                negUnl.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/unordered_set/emplace.html">emplace</a>(s);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> negUnl;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;PublicKey&gt;</a></div>
<div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a5264190c7219d0bbc42c2b70c386e1ec">  682</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a5264190c7219d0bbc42c2b70c386e1ec">Ledger::validatorToDisable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#a53590de263224dde45f4856da2852319">keylet::negativeUNL</a>());</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        sle &amp;&amp; sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">sfValidatorToDisable</a>))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keyword">auto</span> d = sle-&gt;getFieldVL(<a class="code" href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">sfValidatorToDisable</a>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keyword">auto</span> s = <a class="code" href="namespaceripple.html#aabe37451093c21757855542d68fba3ce">makeSlice</a>(d);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceripple.html#adc1f8a2c9b47d7c08e671ad3473e9d3a">publicKeyType</a>(s))</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classripple_1_1PublicKey.html">PublicKey</a>(s);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;PublicKey&gt;</a></div>
<div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a29434afa7c2ad64e71bb139bdd588191">  697</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a29434afa7c2ad64e71bb139bdd588191">Ledger::validatorToReEnable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">read</a>(<a class="code" href="namespaceripple_1_1keylet.html#a53590de263224dde45f4856da2852319">keylet::negativeUNL</a>());</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        sle &amp;&amp; sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">sfValidatorToReEnable</a>))</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keyword">auto</span> d = sle-&gt;getFieldVL(<a class="code" href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">sfValidatorToReEnable</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keyword">auto</span> s = <a class="code" href="namespaceripple.html#aabe37451093c21757855542d68fba3ce">makeSlice</a>(d);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceripple.html#adc1f8a2c9b47d7c08e671ad3473e9d3a">publicKeyType</a>(s))</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classripple_1_1PublicKey.html">PublicKey</a>(s);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a57cbdf736a8b80012ded0f3eeac30691">  712</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a57cbdf736a8b80012ded0f3eeac30691">Ledger::updateNegativeUNL</a>()</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;{</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">peek</a>(<a class="code" href="namespaceripple_1_1keylet.html#a53590de263224dde45f4856da2852319">keylet::negativeUNL</a>());</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (!sle)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> hasToDisable = sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">sfValidatorToDisable</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">const</span> hasToReEnable = sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">sfValidatorToReEnable</a>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (!hasToDisable &amp;&amp; !hasToReEnable)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="classripple_1_1STArray.html">STArray</a> newNUnl;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (sle-&gt;isFieldPresent(<a class="code" href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">sfDisabledValidators</a>))</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span>&amp; oldNUnl = sle-&gt;getFieldArray(<a class="code" href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">sfDisabledValidators</a>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> v : oldNUnl)</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <span class="keywordflow">if</span> (hasToReEnable &amp;&amp; v.isFieldPresent(<a class="code" href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">sfPublicKey</a>) &amp;&amp;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                v.getFieldVL(<a class="code" href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">sfPublicKey</a>) ==</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    sle-&gt;getFieldVL(<a class="code" href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">sfValidatorToReEnable</a>))</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            newNUnl.<a class="code" href="classripple_1_1STArray.html#adc3dc750320964c46b6d4ea2af8b8bc7">push_back</a>(v);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (hasToDisable)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        newNUnl.<a class="code" href="classripple_1_1STArray.html#a12601f465a34c4aba5b9212e747d738d">emplace_back</a>(<a class="code" href="namespaceripple.html#a25781d261e5e805fdf2834ab4af7be30">sfDisabledValidator</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        newNUnl.<a class="code" href="classripple_1_1STArray.html#a9a8e8e818ee5ba2536921d3e63cda98e">back</a>().<a class="code" href="classripple_1_1STObject.html#af1235d307d6f464392a583d0dfaa3cc4">setFieldVL</a>(</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <a class="code" href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">sfPublicKey</a>, sle-&gt;getFieldVL(<a class="code" href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">sfValidatorToDisable</a>));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        newNUnl.<a class="code" href="classripple_1_1STArray.html#a9a8e8e818ee5ba2536921d3e63cda98e">back</a>().<a class="code" href="classripple_1_1STObject.html#acd1aac04649d694a3524faf2ddebf843">setFieldU32</a>(<a class="code" href="namespaceripple.html#af96d1bdc5286a37ae6e34b3f05d7a1bd">sfFirstLedgerSequence</a>, <a class="code" href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">seq</a>());</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (!newNUnl.<a class="code" href="classripple_1_1STArray.html#a158ccc470b30b011cd462eadcf6f249c">empty</a>())</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        sle-&gt;setFieldArray(<a class="code" href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">sfDisabledValidators</a>, newNUnl);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">if</span> (hasToReEnable)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            sle-&gt;makeFieldAbsent(<a class="code" href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">sfValidatorToReEnable</a>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">if</span> (hasToDisable)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            sle-&gt;makeFieldAbsent(<a class="code" href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">sfValidatorToDisable</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">rawReplace</a>(sle);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">rawErase</a>(sle);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#ac72cd0b23f72fff0b3cd479007b94d10">  763</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#ac72cd0b23f72fff0b3cd479007b94d10">Ledger::walkLedger</a>(<a class="code" href="classbeast_1_1Journal.html">beast::Journal</a> j)<span class="keyword"> const</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;SHAMapMissingNode&gt;</a> missingNodes1;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;SHAMapMissingNode&gt;</a> missingNodes2;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;getHash().isZero() &amp;&amp; !<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>.<a class="code" href="classripple_1_1base__uint.html#a6fd7dba1ad932f4c1246c9a090c145e5">isZero</a>() &amp;&amp;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        !<a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;fetchRoot(<a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{info_.accountHash}, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        missingNodes1.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/emplace_back.html">emplace_back</a>(</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">SHAMapType::STATE</a>, <a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>});</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;walkMap(missingNodes1, 32);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (!missingNodes1.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/empty.html">empty</a>())</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> stream = j.<a class="code" href="classbeast_1_1Journal.html#a87d6bd59020d94110027dcab3d9e3357">info</a>())</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            stream &lt;&lt; missingNodes1.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() &lt;&lt; <span class="stringliteral">&quot; missing account node(s)&quot;</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            stream &lt;&lt; <span class="stringliteral">&quot;First: &quot;</span> &lt;&lt; missingNodes1[0].what();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;getHash().isZero() &amp;&amp; <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a>.<a class="code" href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">isNonZero</a>() &amp;&amp;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        !<a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;fetchRoot(<a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{info_.txHash}, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        missingNodes2.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/emplace_back.html">emplace_back</a>(</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">SHAMapType::TRANSACTION</a>, <a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a>});</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;walkMap(missingNodes2, 32);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (!missingNodes2.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/empty.html">empty</a>())</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> stream = j.<a class="code" href="classbeast_1_1Journal.html#a87d6bd59020d94110027dcab3d9e3357">info</a>())</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            stream &lt;&lt; missingNodes2.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() &lt;&lt; <span class="stringliteral">&quot; missing transaction node(s)&quot;</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            stream &lt;&lt; <span class="stringliteral">&quot;First: &quot;</span> &lt;&lt; missingNodes2[0].what();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> missingNodes1.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/empty.html">empty</a>() &amp;&amp; missingNodes2.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/empty.html">empty</a>();</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a136b67ea0189f69434c67ebbbffd8e49">  811</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a136b67ea0189f69434c67ebbbffd8e49">Ledger::assertSensible</a>(<a class="code" href="classbeast_1_1Journal.html">beast::Journal</a> ledgerJ)<span class="keyword"> const</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a>.<a class="code" href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">isNonZero</a>() &amp;&amp; <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>.<a class="code" href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">isNonZero</a>() &amp;&amp; <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a> &amp;&amp;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a> &amp;&amp; (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a> == <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;getHash().as_uint256()) &amp;&amp;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a> == <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;getHash().as_uint256()))</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="classJson_1_1Value.html">Json::Value</a> j = <a class="code" href="namespaceripple.html#ad30131b5a5b7cf60d9b392ab868b8c0e">getJson</a>({*<span class="keyword">this</span>, {}});</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    j[jss::accountTreeHash] = <a class="code" href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">to_string</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">accountHash</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    j[jss::transTreeHash] = <a class="code" href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">to_string</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">txHash</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    JLOG(ledgerJ.<a class="code" href="classbeast_1_1Journal.html#a3dfb8e2e3eecccdb5cf78ff21bca069c">fatal</a>()) &lt;&lt; <span class="stringliteral">&quot;ledger is not sensible&quot;</span> &lt;&lt; j;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">// update the skip list with the information from our previous ledger</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">// VFALCO TODO Document this skip list concept</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#ae29576f2d8dc2685c53f5dc18c7925f8">  835</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#ae29576f2d8dc2685c53f5dc18c7925f8">Ledger::updateSkipList</a>()</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> == 0)  <span class="comment">// genesis ledger has no previous ledger</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> prevIndex = <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> - 1;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="comment">// update record of every 256th ledger</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> ((prevIndex &amp; 0xff) == 0)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keyword">auto</span> <span class="keyword">const</span> k = <a class="code" href="namespaceripple_1_1keylet.html#acda2d89a44551845c5be38291e5c9e8b">keylet::skip</a>(prevIndex);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">peek</a>(k);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a> hashes;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordtype">bool</span> created;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (!sle)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            sle = std::make_shared&lt;SLE&gt;(k);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            created = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            hashes = <span class="keyword">static_cast&lt;</span>decltype(hashes)<span class="keyword">&gt;</span>(sle-&gt;getFieldV256(<a class="code" href="namespaceripple.html#ab44eddba949c362c1be0f959ee9a2117">sfHashes</a>));</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            created = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        assert(hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() &lt;= 256);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">push_back</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a5c129196edfd78e992f81959f075e5ca">parentHash</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        sle-&gt;setFieldV256(<a class="code" href="namespaceripple.html#ab44eddba949c362c1be0f959ee9a2117">sfHashes</a>, <a class="code" href="classripple_1_1STVector256.html">STVector256</a>(hashes));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        sle-&gt;setFieldU32(<a class="code" href="namespaceripple.html#a628c597be4a050e3957be56ec78df01a">sfLastLedgerSequence</a>, prevIndex);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (created)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <a class="code" href="classripple_1_1Ledger.html#a7ed6dcfefe77ee7b9e90e052df79e52d">rawInsert</a>(sle);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">rawReplace</a>(sle);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// update record of past 256 ledger</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span> k = <a class="code" href="namespaceripple_1_1keylet.html#acda2d89a44551845c5be38291e5c9e8b">keylet::skip</a>();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keyword">auto</span> sle = <a class="code" href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">peek</a>(k);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a> hashes;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordtype">bool</span> created;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (!sle)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        sle = std::make_shared&lt;SLE&gt;(k);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        created = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        hashes = <span class="keyword">static_cast&lt;</span>decltype(hashes)<span class="keyword">&gt;</span>(sle-&gt;getFieldV256(<a class="code" href="namespaceripple.html#ab44eddba949c362c1be0f959ee9a2117">sfHashes</a>));</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        created = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    assert(hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() &lt;= 256);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>() == 256)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/erase.html">erase</a>(hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/begin.html">begin</a>());</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    hashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">push_back</a>(<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a5c129196edfd78e992f81959f075e5ca">parentHash</a>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    sle-&gt;setFieldV256(<a class="code" href="namespaceripple.html#ab44eddba949c362c1be0f959ee9a2117">sfHashes</a>, <a class="code" href="classripple_1_1STVector256.html">STVector256</a>(hashes));</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    sle-&gt;setFieldU32(<a class="code" href="namespaceripple.html#a628c597be4a050e3957be56ec78df01a">sfLastLedgerSequence</a>, prevIndex);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (created)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a7ed6dcfefe77ee7b9e90e052df79e52d">rawInsert</a>(sle);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">rawReplace</a>(sle);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a362b0cb4e326fbf23a38d588c51981ff">  899</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a362b0cb4e326fbf23a38d588c51981ff">Ledger::isFlagLedger</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> % <a class="code" href="namespaceripple.html#a9a1e35684311191adb2870e2d88030fc">FLAG_LEDGER_INTERVAL</a> == 0;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;}</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a54305a9aa3553299b6ed1003cf5ec8d7">  904</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a54305a9aa3553299b6ed1003cf5ec8d7">Ledger::isVotingLedger</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">info_</a>.<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a> + 1) % <a class="code" href="namespaceripple.html#a9a1e35684311191adb2870e2d88030fc">FLAG_LEDGER_INTERVAL</a> == 0;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="namespaceripple.html#a81aef0121745f69cf76b866c91c2639c">  910</a></span>&#160;<a class="code" href="namespaceripple.html#a81aef0121745f69cf76b866c91c2639c">isFlagLedger</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">LedgerIndex</a> seq)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">return</span> seq % <a class="code" href="namespaceripple.html#a9a1e35684311191adb2870e2d88030fc">FLAG_LEDGER_INTERVAL</a> == 0;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="namespaceripple.html#a4574aa8b71b4bb8afc56cf6daff9ca86">  916</a></span>&#160;<a class="code" href="namespaceripple.html#a4574aa8b71b4bb8afc56cf6daff9ca86">saveValidatedLedger</a>(</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger const&gt;</a> <span class="keyword">const</span>&amp; ledger,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordtype">bool</span> current)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keyword">auto</span> j = app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keyword">auto</span> seq = ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (!app.<a class="code" href="classripple_1_1Application.html#abddbb82136e88fc73b03054df91e8ba6">pendingSaves</a>().<a class="code" href="classripple_1_1PendingSaves.html#a9c7ac1e9824096756225e77ed14244c1">startWork</a>(seq))</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="comment">// The save was completed synchronously</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        JLOG(j.debug()) &lt;&lt; <span class="stringliteral">&quot;Save aborted&quot;</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keyword">auto</span> res = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classripple_1_1RelationalDBInterfaceSqlite.html">RelationalDBInterfaceSqlite</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                   &amp;app.<a class="code" href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">getRelationalDBInterface</a>())</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                   -&gt;<a class="code" href="namespaceripple.html#a4574aa8b71b4bb8afc56cf6daff9ca86">saveValidatedLedger</a>(ledger, <a class="code" href="namespaceripple.html#a6434c1a0fd22b77e2e4a228c0eca79eba43b5c9175984c071f30b873fdce0a000">current</a>);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// Clients can now trust the database for</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="comment">// information about this ledger sequence.</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    app.<a class="code" href="classripple_1_1Application.html#abddbb82136e88fc73b03054df91e8ba6">pendingSaves</a>().<a class="code" href="classripple_1_1PendingSaves.html#a50e49f47a9b7bbc2e7875918708b0624">finishWork</a>(seq);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="namespaceripple.html#afd9c0655540fb85bcc173ec81c7c7290">  944</a></span>&#160;<a class="code" href="namespaceripple.html#afd9c0655540fb85bcc173ec81c7c7290">pendSaveValidated</a>(</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger const&gt;</a> <span class="keyword">const</span>&amp; ledger,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordtype">bool</span> isSynchronous,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">isCurrent</a>)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;{</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (!app.<a class="code" href="classripple_1_1Application.html#ab7873738f31780e68f0d12d87fc35356">getHashRouter</a>().<a class="code" href="classripple_1_1HashRouter.html#ac43309b8c10713823bdc233f39931472">setFlags</a>(ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a>, SF_SAVED))</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">// We have tried to save this ledger recently</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keyword">auto</span> stream = app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>).<a class="code" href="classbeast_1_1Journal.html#a556228cb60bcf405c225d3f64b7b01ae">debug</a>();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        JLOG(stream) &lt;&lt; <span class="stringliteral">&quot;Double pend save for &quot;</span> &lt;&lt; ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">if</span> (!isSynchronous || !app.<a class="code" href="classripple_1_1Application.html#abddbb82136e88fc73b03054df91e8ba6">pendingSaves</a>().<a class="code" href="classripple_1_1PendingSaves.html#aeb28ec1977b7ac30071426b9170c7345">pending</a>(ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>))</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="comment">// Either we don&#39;t need it to be finished</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <span class="comment">// or it is finished</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    assert(ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a25c5bcfcef6f0b9f0de97582ee37797a">isImmutable</a>());</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">if</span> (!app.<a class="code" href="classripple_1_1Application.html#abddbb82136e88fc73b03054df91e8ba6">pendingSaves</a>().<a class="code" href="classripple_1_1PendingSaves.html#ab5e9e105f7d12575bc2025468b4cc1f8">shouldWork</a>(ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>, isSynchronous))</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keyword">auto</span> stream = app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>).<a class="code" href="classbeast_1_1Journal.html#a556228cb60bcf405c225d3f64b7b01ae">debug</a>();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        JLOG(stream) &lt;&lt; <span class="stringliteral">&quot;Pend save with seq in pending saves &quot;</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                     &lt;&lt; ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17a">JobType</a> <span class="keyword">const</span> jobType{<a class="code" href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">isCurrent</a> ? <a class="code" href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17aa75c73aafec01f5472607a930d5d1f3b9">jtPUBLEDGER</a> : <a class="code" href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17aaa4e32e16425bc63db04ed98f3b3f4259">jtPUBOLDLEDGER</a>};</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">char</span> <span class="keyword">const</span>* <span class="keyword">const</span> jobName{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <a class="code" href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">isCurrent</a> ? <span class="stringliteral">&quot;Ledger::pendSave&quot;</span> : <span class="stringliteral">&quot;Ledger::pendOldSave&quot;</span>};</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// See if we can use the JobQueue.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (!isSynchronous &amp;&amp;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        app.<a class="code" href="classripple_1_1Application.html#a860be08979e27d8c6f37f722f996ba6c">getJobQueue</a>().<a class="code" href="classripple_1_1JobQueue.html#af5e34187d55aa58e551dc196aaf1ec25">addJob</a>(</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            jobType, jobName, [&amp;app, ledger, <a class="code" href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">isCurrent</a>](<a class="code" href="classripple_1_1Job.html">Job</a>&amp;) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                saveValidatedLedger(app, ledger, isCurrent);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            }))</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">// The JobQueue won&#39;t do the Job.  Do the save synchronously.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceripple.html#a4574aa8b71b4bb8afc56cf6daff9ca86">saveValidatedLedger</a>(app, ledger, <a class="code" href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">isCurrent</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;}</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a0e6f8ad49de88ce1eb3ffa77ca346c21">  994</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a0e6f8ad49de88ce1eb3ffa77ca346c21">Ledger::unshare</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;unshare();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;unshare();</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="classripple_1_1Ledger.html#a156082bb161144196934ce455ee404b2"> 1001</a></span>&#160;<a class="code" href="classripple_1_1Ledger.html#a156082bb161144196934ce455ee404b2">Ledger::invariants</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">stateMap_</a>-&gt;invariants();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">txMap_</a>-&gt;invariants();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;}</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"> * Make ledger using info loaded from database.</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"> * @param LedgerInfo: Ledger information.</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"> * @param app: Link to the Application.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"> * @param acquire: Acquire the ledger if not found locally.</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"> * @return Shared pointer to the ledger.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a></div>
<div class="line"><a name="l01017"></a><span class="lineno"><a class="line" href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061"> 1017</a></span>&#160;<a class="code" href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061">loadLedgerHelper</a>(<a class="code" href="structripple_1_1LedgerInfo.html">LedgerInfo</a> <span class="keyword">const</span>&amp; info, <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app, <span class="keywordtype">bool</span> acquire)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;{</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordtype">bool</span> loaded;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keyword">auto</span> ledger = std::make_shared&lt;Ledger&gt;(</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        info,</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        loaded,</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="namespaceripple.html#a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144">acquire</a>,</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        app.<a class="code" href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">config</a>(),</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        app.<a class="code" href="classripple_1_1Application.html#a26ccdf06f25ceadec7894dd5f8da7eab">getNodeFamily</a>(),</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>));</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">if</span> (!loaded)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        ledger.reset();</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> ledger;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;}</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="namespaceripple.html#a16f9dbea9c8dfaaaca124cf61c6b6e6d"> 1035</a></span>&#160;<a class="code" href="namespaceripple.html#a16f9dbea9c8dfaaaca124cf61c6b6e6d">finishLoadByIndexOrHash</a>(</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a> <span class="keyword">const</span>&amp; ledger,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="classripple_1_1Config.html">Config</a> <span class="keyword">const</span>&amp; config,</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classbeast_1_1Journal.html">beast::Journal</a> j)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (!ledger)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a87ea8cee44207987a9d9ac826aacc831">setImmutable</a>(config);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    JLOG(j.<a class="code" href="classbeast_1_1Journal.html#abbe082bd27ca0f1d1365af2824e4f85b">trace</a>()) &lt;&lt; <span class="stringliteral">&quot;Loaded ledger: &quot;</span> &lt;&lt; <a class="code" href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">to_string</a>(ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a>);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a8a75fcab11d8fe2e7bd5cd6643a052e1">setFull</a>();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/tuple.html">std::tuple&lt;std::shared_ptr&lt;Ledger&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>, <a class="code" href="namespaceripple.html#a356c68147333a9a48a344718038576d9">uint256</a>&gt;</div>
<div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="namespaceripple.html#a04cf5c0dd5329bc0e0203fb86cf91ed3"> 1051</a></span>&#160;<a class="code" href="namespaceripple.html#a04cf5c0dd5329bc0e0203fb86cf91ed3">getLatestLedger</a>(<a class="code" href="classripple_1_1Application.html">Application</a>&amp; app)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keyword">const</span> <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;LedgerInfo&gt;</a> info =</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        app.<a class="code" href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">getRelationalDBInterface</a>().<a class="code" href="classripple_1_1RelationalDBInterface.html#a1cf137dce25e130bffe96e816ab67408">getNewestLedgerInfo</a>();</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (!info)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> {<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a>(), {}, {}};</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061">loadLedgerHelper</a>(*info, app, <span class="keyword">true</span>), info-&gt;seq, info-&gt;hash};</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a></div>
<div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="namespaceripple.html#a22adb38923282bf7dbb38655afdb381d"> 1061</a></span>&#160;<a class="code" href="namespaceripple.html#a22adb38923282bf7dbb38655afdb381d">loadByIndex</a>(<a class="codeRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> ledgerIndex, <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app, <span class="keywordtype">bool</span> acquire)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;LedgerInfo&gt;</a> info =</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            app.<a class="code" href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">getRelationalDBInterface</a>().<a class="code" href="classripple_1_1RelationalDBInterface.html#a1704b3edfa1eebb97e2772a1362ef781">getLedgerInfoByIndex</a>(ledgerIndex))</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a> ledger = <a class="code" href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061">loadLedgerHelper</a>(*info, app, <a class="code" href="namespaceripple.html#a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144">acquire</a>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="namespaceripple.html#a16f9dbea9c8dfaaaca124cf61c6b6e6d">finishLoadByIndexOrHash</a>(ledger, app.<a class="code" href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">config</a>(), app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>));</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">return</span> ledger;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a></div>
<div class="line"><a name="l01074"></a><span class="lineno"><a class="line" href="namespaceripple.html#a729619e7a3a0d92226e7d52347ff2a5e"> 1074</a></span>&#160;<a class="code" href="namespaceripple.html#a729619e7a3a0d92226e7d52347ff2a5e">loadByHash</a>(<a class="code" href="classripple_1_1base__uint.html">uint256</a> <span class="keyword">const</span>&amp; ledgerHash, <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app, <span class="keywordtype">bool</span> acquire)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;{</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (<a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional&lt;LedgerInfo&gt;</a> info =</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            app.<a class="code" href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">getRelationalDBInterface</a>().<a class="code" href="classripple_1_1RelationalDBInterface.html#aa2591b2d99a0dcce5e980eb99b1de2a7">getLedgerInfoByHash</a>(ledgerHash))</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;Ledger&gt;</a> ledger = <a class="code" href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061">loadLedgerHelper</a>(*info, app, <a class="code" href="namespaceripple.html#a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144">acquire</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <a class="code" href="namespaceripple.html#a16f9dbea9c8dfaaaca124cf61c6b6e6d">finishLoadByIndexOrHash</a>(ledger, app.<a class="code" href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">config</a>(), app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>));</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        assert(!ledger || ledger-&gt;<a class="code" href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">hash</a> == ledgerHash);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> ledger;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair&lt;std::shared_ptr&lt;STTx const&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STObject const&gt;</a>&gt;&gt;</div>
<div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="namespaceripple.html#a6328c469eb804b05c66c8c140d470ba5"> 1089</a></span>&#160;<a class="code" href="namespaceripple.html#a6328c469eb804b05c66c8c140d470ba5">flatFetchTransactions</a>(<a class="code" href="classripple_1_1Application.html">Application</a>&amp; app, <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;uint256&gt;</a>&amp; nodestoreHashes)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;{</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">if</span> (!app.<a class="code" href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">config</a>().<a class="code" href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">reporting</a>())</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="stringliteral">&quot;flatFetchTransactions: not running in reporting mode&quot;</span>);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair&lt;std::shared_ptr&lt;STTx const&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STObject const&gt;</a>&gt;&gt;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        txns;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keyword">auto</span> start = <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/system_clock/now.html">std::chrono::system_clock::now</a>();</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keyword">auto</span> nodeDb =</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classripple_1_1NodeStore_1_1DatabaseNodeImp.html">NodeStore::DatabaseNodeImp</a>*<span class="keyword">&gt;</span>(&amp;(app.<a class="code" href="classripple_1_1Application.html#a25c5851322f6cb3762563fd1278c6143">getNodeStore</a>()));</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span> (!nodeDb)</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="stringliteral">&quot;Called flatFetchTransactions but database is not DatabaseNodeImp&quot;</span>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keyword">auto</span> objs = nodeDb-&gt;fetchBatch(nodestoreHashes);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keyword">auto</span> end = <a class="codeRef" href="http://en.cppreference.com/w/cpp/chrono/system_clock/now.html">std::chrono::system_clock::now</a>();</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    JLOG(app.<a class="code" href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">journal</a>(<span class="stringliteral">&quot;Ledger&quot;</span>).<a class="code" href="classbeast_1_1Journal.html#a556228cb60bcf405c225d3f64b7b01ae">debug</a>())</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; Flat fetch time : &quot;</span> &lt;&lt; ((end - start).count() / 1000000000.0)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; number of transactions &quot;</span> &lt;&lt; nodestoreHashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>();</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    assert(objs.size() == nodestoreHashes.<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector/size.html">size</a>());</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; objs.size(); ++i)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <a class="code" href="classripple_1_1base__uint.html">uint256</a>&amp; nodestoreHash = nodestoreHashes[i];</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keyword">auto</span>&amp; obj = objs[i];</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> (obj)</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <span class="keyword">auto</span> node = <a class="code" href="classripple_1_1SHAMapTreeNode.html#a5631e2f77123e3b73229ef4c890ad60f">SHAMapTreeNode::makeFromPrefix</a>(</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <a class="code" href="namespaceripple.html#aabe37451093c21757855542d68fba3ce">makeSlice</a>(obj-&gt;getData()), <a class="code" href="classripple_1_1SHAMapHash.html">SHAMapHash</a>{nodestoreHash});</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">if</span> (!node)</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                    <span class="stringliteral">&quot;flatFetchTransactions : Error making SHAMap node&quot;</span>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keyword">auto</span> item = (<span class="keyword">static_cast&lt;</span><a class="code" href="classripple_1_1SHAMapLeafNode.html">SHAMapLeafNode</a>*<span class="keyword">&gt;</span>(node.get()))-&gt;peekItem();</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            <span class="keywordflow">if</span> (!item)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    <span class="stringliteral">&quot;flatFetchTransactions : Error reading SHAMap node&quot;</span>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <span class="keyword">auto</span> txnPlusMeta = <a class="code" href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">deserializeTxPlusMeta</a>(*item);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <span class="keywordflow">if</span> (!txnPlusMeta.first || !txnPlusMeta.second)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                    <span class="stringliteral">&quot;flatFetchTransactions : Error deserializing SHAMap node&quot;</span>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            txns.push_back(std::move(txnPlusMeta));</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            Throw&lt;std::runtime_error&gt;(</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <span class="stringliteral">&quot;flatFetchTransactions : Containing SHAMap node not found&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> txns;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;}</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<a class="codeRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="codeRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair&lt;std::shared_ptr&lt;STTx const&gt;</a>, <a class="codeRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;STObject const&gt;</a>&gt;&gt;</div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="namespaceripple.html#a641da3f4ad91dd7082d6a58040932acf"> 1158</a></span>&#160;<a class="code" href="namespaceripple.html#a6328c469eb804b05c66c8c140d470ba5">flatFetchTransactions</a>(<a class="code" href="classripple_1_1ReadView.html">ReadView</a> <span class="keyword">const</span>&amp; ledger, <a class="code" href="classripple_1_1Application.html">Application</a>&amp; app)</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;{</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (!app.<a class="code" href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">config</a>().<a class="code" href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">reporting</a>())</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keyword">auto</span> nodestoreHashes = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classripple_1_1RelationalDBInterfacePostgres.html">RelationalDBInterfacePostgres</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                               &amp;app.<a class="code" href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">getRelationalDBInterface</a>())</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                               -&gt;<a class="code" href="namespaceripple.html#a1f8ed5b1b502a174e0dec8728905cd1e">getTxHashes</a>(ledger.<a class="code" href="classripple_1_1ReadView.html#a9263b10d706a447166b229ad8e3b574c">info</a>().<a class="code" href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">seq</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceripple.html#a6328c469eb804b05c66c8c140d470ba5">flatFetchTransactions</a>(app, nodestoreHashes);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;}</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;}  <span class="comment">// namespace ripple</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassripple_1_1STArray_html_a158ccc470b30b011cd462eadcf6f249c"><div class="ttname"><a href="classripple_1_1STArray.html#a158ccc470b30b011cd462eadcf6f249c">ripple::STArray::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="STArray_8h_source.html#l00138">STArray.h:138</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_a3dfb8e2e3eecccdb5cf78ff21bca069c"><div class="ttname"><a href="classbeast_1_1Journal.html#a3dfb8e2e3eecccdb5cf78ff21bca069c">beast::Journal::fatal</a></div><div class="ttdeci">Stream fatal() const</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00339">Journal.h:339</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_a9263b10d706a447166b229ad8e3b574c"><div class="ttname"><a href="classripple_1_1ReadView.html#a9263b10d706a447166b229ad8e3b574c">ripple::ReadView::info</a></div><div class="ttdeci">virtual LedgerInfo const  &amp; info() const =0</div><div class="ttdoc">Returns information about the ledger.</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a0b300e04e1cd2c608710d02467f4e7be"><div class="ttname"><a href="classripple_1_1Ledger.html#a0b300e04e1cd2c608710d02467f4e7be">ripple::Ledger::slesUpperBound</a></div><div class="ttdeci">std::unique_ptr&lt; sles_type::iter_base &gt; slesUpperBound(uint256 const &amp;key) const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00463">Ledger.cpp:463</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html"><div class="ttname"><a href="classripple_1_1Application.html">ripple::Application</a></div><div class="ttdef"><b>Definition:</b> <a href="Application_8h_source.html#l00103">Application.h:103</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_aa91905044d536f487674eb4e9edad2dd"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#aa91905044d536f487674eb4e9edad2dd">ripple::Ledger::sles_iter_impl::sles_iter_impl</a></div><div class="ttdeci">sles_iter_impl(SHAMap::const_iterator iter)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00095">Ledger.cpp:95</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_aa83dfb46c969cf85cba5ca889b5cf7d6"><div class="ttname"><a href="classripple_1_1Ledger.html#aa83dfb46c969cf85cba5ca889b5cf7d6">ripple::Ledger::slesBegin</a></div><div class="ttdeci">std::unique_ptr&lt; sles_type::iter_base &gt; slesBegin() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00451">Ledger.cpp:451</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a26ccdf06f25ceadec7894dd5f8da7eab"><div class="ttname"><a href="classripple_1_1Application.html#a26ccdf06f25ceadec7894dd5f8da7eab">ripple::Application::getNodeFamily</a></div><div class="ttdeci">virtual Family &amp; getNodeFamily()=0</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_aef7b9a3e3b4fd553e0a9db4ff1e7a8a7"><div class="ttname"><a href="classripple_1_1Ledger.html#aef7b9a3e3b4fd553e0a9db4ff1e7a8a7">ripple::Ledger::addSLE</a></div><div class="ttdeci">bool addSLE(SLE const &amp;sle)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00372">Ledger.cpp:372</a></div></div>
<div class="ttc" id="anamespaceripple_html_a81aef0121745f69cf76b866c91c2639c"><div class="ttname"><a href="namespaceripple.html#a81aef0121745f69cf76b866c91c2639c">ripple::isFlagLedger</a></div><div class="ttdeci">bool isFlagLedger(LedgerIndex seq)</div><div class="ttdoc">Returns true if the given ledgerIndex is a flag ledgerIndex.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00910">Ledger.cpp:910</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a210375076ddca23b7374efea0b34de4a"><div class="ttname"><a href="classripple_1_1Ledger.html#a210375076ddca23b7374efea0b34de4a">ripple::Ledger::rawReplace</a></div><div class="ttdeci">void rawReplace(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Unconditionally replace a state item.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00541">Ledger.cpp:541</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad5143ceada01141772ae4aab984f94bda7fa2267e9b1bf739a70bb1860ab2a99c"><div class="ttname"><a href="namespaceripple.html#ad5143ceada01141772ae4aab984f94bda7fa2267e9b1bf739a70bb1860ab2a99c">ripple::HashPrefix::ledgerMaster</a></div><div class="ttdeci">@ ledgerMaster</div><div class="ttdoc">ledger master data for signing</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a6bb1b6a13fe4c60edbfd502c39fa687c"><div class="ttname"><a href="classripple_1_1Ledger.html#a6bb1b6a13fe4c60edbfd502c39fa687c">ripple::Ledger::txMap_</a></div><div class="ttdeci">std::shared_ptr&lt; SHAMap &gt; txMap_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00402">Ledger.h:402</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a87ea8cee44207987a9d9ac826aacc831"><div class="ttname"><a href="classripple_1_1Ledger.html#a87ea8cee44207987a9d9ac826aacc831">ripple::Ledger::setImmutable</a></div><div class="ttdeci">void setImmutable(Config const &amp;config, bool rehash=true)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00336">Ledger.cpp:336</a></div></div>
<div class="ttc" id="anamespaceripple_html_aabe37451093c21757855542d68fba3ce"><div class="ttname"><a href="namespaceripple.html#aabe37451093c21757855542d68fba3ce">ripple::makeSlice</a></div><div class="ttdeci">std::enable_if_t&lt; std::is_same&lt; T, char &gt;::value||std::is_same&lt; T, unsigned char &gt;::value, Slice &gt; makeSlice(std::array&lt; T, N &gt; const &amp;a)</div><div class="ttdef"><b>Definition:</b> <a href="Slice_8h_source.html#l00240">Slice.h:240</a></div></div>
<div class="ttc" id="anamespaceripple_html_a9155cdcb2a25876442863f8a8aaee0af"><div class="ttname"><a href="namespaceripple.html#a9155cdcb2a25876442863f8a8aaee0af">ripple::sfReserveBase</a></div><div class="ttdeci">const SF_UINT32 sfReserveBase</div></div>
<div class="ttc" id="astructripple_1_1Keylet_html"><div class="ttname"><a href="structripple_1_1Keylet.html">ripple::Keylet</a></div><div class="ttdoc">A pair of SHAMap key and LedgerEntryType.</div><div class="ttdef"><b>Definition:</b> <a href="Keylet_8h_source.html#l00038">Keylet.h:38</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a57a48cb61be7affac6c4423d1317c5f8"><div class="ttname"><a href="classripple_1_1Ledger.html#a57a48cb61be7affac6c4423d1317c5f8">ripple::Ledger::mImmutable</a></div><div class="ttdeci">bool mImmutable</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00400">Ledger.h:400</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html">ripple::Ledger::sles_iter_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00083">Ledger.cpp:83</a></div></div>
<div class="ttc" id="aclassripple_1_1STLedgerEntry_html"><div class="ttname"><a href="classripple_1_1STLedgerEntry.html">ripple::STLedgerEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="STLedgerEntry_8h_source.html#l00030">STLedgerEntry.h:30</a></div></div>
<div class="ttc" id="anamespaceripple_html_a1565922b53abf78b7587a6e60d8d24ba"><div class="ttname"><a href="namespaceripple.html#a1565922b53abf78b7587a6e60d8d24ba">ripple::sfMetadata</a></div><div class="ttdeci">const SField sfMetadata</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a54305a9aa3553299b6ed1003cf5ec8d7"><div class="ttname"><a href="classripple_1_1Ledger.html#a54305a9aa3553299b6ed1003cf5ec8d7">ripple::Ledger::isVotingLedger</a></div><div class="ttdeci">bool isVotingLedger() const</div><div class="ttdoc">Returns true if the ledger directly precedes a flag ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00904">Ledger.cpp:904</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_ae0a63c9a1943ea6a18726df087a37bdc"><div class="ttname"><a href="classripple_1_1Ledger.html#ae0a63c9a1943ea6a18726df087a37bdc">ripple::Ledger::succ</a></div><div class="ttdeci">std::optional&lt; uint256 &gt; succ(uint256 const &amp;key, std::optional&lt; uint256 &gt; const &amp;last=std::nullopt) const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00421">Ledger.cpp:421</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a6cf0862134638e77b99e53c25c41f3a9"><div class="ttname"><a href="classripple_1_1Ledger.html#a6cf0862134638e77b99e53c25c41f3a9">ripple::Ledger::txRead</a></div><div class="ttdeci">tx_type txRead(key_type const &amp;key) const override</div><div class="ttdoc">Read a transaction from the tx map.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00488">Ledger.cpp:488</a></div></div>
<div class="ttc" id="ashared_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a5c129196edfd78e992f81959f075e5ca"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a5c129196edfd78e992f81959f075e5ca">ripple::LedgerInfo::parentHash</a></div><div class="ttdeci">uint256 parentHash</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00103">ReadView.h:103</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_a5660f18c64be5f8270fe66fcc25d0de8"><div class="ttname"><a href="namespaceripple_1_1keylet.html#a5660f18c64be5f8270fe66fcc25d0de8">ripple::keylet::amendments</a></div><div class="ttdeci">Keylet const  &amp; amendments() noexcept</div><div class="ttdoc">The index of the amendment table.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00160">Indexes.cpp:160</a></div></div>
<div class="ttc" id="anamespaceripple_html_a22adb38923282bf7dbb38655afdb381d"><div class="ttname"><a href="namespaceripple.html#a22adb38923282bf7dbb38655afdb381d">ripple::loadByIndex</a></div><div class="ttdeci">std::shared_ptr&lt; Ledger &gt; loadByIndex(std::uint32_t ledgerIndex, Application &amp;app, bool acquire)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01061">Ledger.cpp:1061</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad5143ceada01141772ae4aab984f94bda555f976fd82d9e7e487770c44c7980bf"><div class="ttname"><a href="namespaceripple.html#ad5143ceada01141772ae4aab984f94bda555f976fd82d9e7e487770c44c7980bf">ripple::HashPrefix::txNode</a></div><div class="ttdeci">@ txNode</div><div class="ttdoc">transaction plus metadata</div></div>
<div class="ttc" id="autility_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/utility.html">utility</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_aba4ba40c32fcac1daa1fb3c867c5117e"><div class="ttname"><a href="classripple_1_1Ledger.html#aba4ba40c32fcac1daa1fb3c867c5117e">ripple::Ledger::fees_</a></div><div class="ttdeci">Fees fees_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00408">Ledger.h:408</a></div></div>
<div class="ttc" id="aexception_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/error/exception.html">std::exception</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1base__uint_html_ad2bffc75e554b89befbb9388e07392c0"><div class="ttname"><a href="classripple_1_1base__uint.html#ad2bffc75e554b89befbb9388e07392c0">ripple::base_uint::isNonZero</a></div><div class="ttdeci">bool isNonZero() const</div><div class="ttdef"><b>Definition:</b> <a href="base__uint_8h_source.html#l00513">base_uint.h:513</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_abbe082bd27ca0f1d1365af2824e4f85b"><div class="ttname"><a href="classbeast_1_1Journal.html#abbe082bd27ca0f1d1365af2824e4f85b">beast::Journal::trace</a></div><div class="ttdeci">Stream trace() const</div><div class="ttdoc">Severity stream access functions.</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00309">Journal.h:309</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a0e6f8ad49de88ce1eb3ffa77ca346c21"><div class="ttname"><a href="classripple_1_1Ledger.html#a0e6f8ad49de88ce1eb3ffa77ca346c21">ripple::Ledger::unshare</a></div><div class="ttdeci">void unshare() const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00994">Ledger.cpp:994</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a220660a0e999b374e502b117ae93833f"><div class="ttname"><a href="classripple_1_1Ledger.html#a220660a0e999b374e502b117ae93833f">ripple::Ledger::slesEnd</a></div><div class="ttdeci">std::unique_ptr&lt; sles_type::iter_base &gt; slesEnd() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00457">Ledger.cpp:457</a></div></div>
<div class="ttc" id="astructripple_1_1ReadView_1_1txs__type_html"><div class="ttname"><a href="structripple_1_1ReadView_1_1txs__type.html">ripple::ReadView::txs_type</a></div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00213">ReadView.h:213</a></div></div>
<div class="ttc" id="anamespaceripple_html_af96d1bdc5286a37ae6e34b3f05d7a1bd"><div class="ttname"><a href="namespaceripple.html#af96d1bdc5286a37ae6e34b3f05d7a1bd">ripple::sfFirstLedgerSequence</a></div><div class="ttdeci">const SF_UINT32 sfFirstLedgerSequence</div></div>
<div class="ttc" id="anamespaceripple_html_ae0356b1de00f841c554c830be509dd58ab2364e40a67b08ba6170314afc07d07b"><div class="ttname"><a href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58ab2364e40a67b08ba6170314afc07d07b">ripple::SHAMapNodeType::tnACCOUNT_STATE</a></div><div class="ttdeci">@ tnACCOUNT_STATE</div></div>
<div class="ttc" id="aunordered_set_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/unordered_set.html">std::unordered_set</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1PendingSaves_html_aeb28ec1977b7ac30071426b9170c7345"><div class="ttname"><a href="classripple_1_1PendingSaves.html#aeb28ec1977b7ac30071426b9170c7345">ripple::PendingSaves::pending</a></div><div class="ttdeci">bool pending(LedgerIndex seq)</div><div class="ttdoc">Return true if a ledger is in the progress of being saved.</div><div class="ttdef"><b>Definition:</b> <a href="PendingSaves_8h_source.html#l00084">PendingSaves.h:84</a></div></div>
<div class="ttc" id="apair_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a></div></div>
<div class="ttc" id="anamespaceripple_html_a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4"><div class="ttname"><a href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3cae6bed345f53943469741d7295552fcd4">ripple::SHAMapType::TRANSACTION</a></div><div class="ttdeci">@ TRANSACTION</div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_aab2ff724e7c4b0ccdea55d62cdab8bbc"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#aab2ff724e7c4b0ccdea55d62cdab8bbc">ripple::LedgerInfo::hash</a></div><div class="ttdeci">uint256 hash</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00100">ReadView.h:100</a></div></div>
<div class="ttc" id="aclassripple_1_1XRPAmount_html_a8a65b5528d6021159c5b8772aa86cfc1"><div class="ttname"><a href="classripple_1_1XRPAmount.html#a8a65b5528d6021159c5b8772aa86cfc1">ripple::XRPAmount::drops</a></div><div class="ttdeci">constexpr value_type drops() const</div><div class="ttdoc">Returns the number of drops.</div><div class="ttdef"><b>Definition:</b> <a href="XRPAmount_8h_source.html#l00172">XRPAmount.h:172</a></div></div>
<div class="ttc" id="anamespaceripple_html_a586714bf3cbbbb406d6f169742bce0d5"><div class="ttname"><a href="namespaceripple.html#a586714bf3cbbbb406d6f169742bce0d5">ripple::sfSequence</a></div><div class="ttdeci">const SF_UINT32 sfSequence</div></div>
<div class="ttc" id="anamespaceripple_html_a57d7e7b27df7e719fdf5569f96be60a3a65cfe147458030070724c8b3795e508f"><div class="ttname"><a href="namespaceripple.html#a57d7e7b27df7e719fdf5569f96be60a3a65cfe147458030070724c8b3795e508f">ripple::hotACCOUNT_NODE</a></div><div class="ttdeci">@ hotACCOUNT_NODE</div><div class="ttdef"><b>Definition:</b> <a href="NodeObject_8h_source.html#l00035">NodeObject.h:35</a></div></div>
<div class="ttc" id="avector_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/vector.html">vector</a></div></div>
<div class="ttc" id="asize_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/size.html">std::vector::size</a></div><div class="ttdeci">T size(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_abd5ac50ab472e7b95341b391cc941e48"><div class="ttname"><a href="classripple_1_1Application.html#abd5ac50ab472e7b95341b391cc941e48">ripple::Application::getRelationalDBInterface</a></div><div class="ttdeci">virtual RelationalDBInterface &amp; getRelationalDBInterface()=0</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_a665f0643d3b6c86e42df3453dc634761"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#a665f0643d3b6c86e42df3453dc634761">ripple::Ledger::sles_iter_impl::dereference</a></div><div class="ttdeci">sles_type::value_type dereference() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00120">Ledger.cpp:120</a></div></div>
<div class="ttc" id="aduration_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/duration.html">std::chrono::duration</a></div></div>
<div class="ttc" id="aclassripple_1_1NodeStore_1_1DatabaseNodeImp_html"><div class="ttname"><a href="classripple_1_1NodeStore_1_1DatabaseNodeImp.html">ripple::NodeStore::DatabaseNodeImp</a></div><div class="ttdef"><b>Definition:</b> <a href="DatabaseNodeImp_8h_source.html#l00030">DatabaseNodeImp.h:30</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_acda2d89a44551845c5be38291e5c9e8b"><div class="ttname"><a href="namespaceripple_1_1keylet.html#acda2d89a44551845c5be38291e5c9e8b">ripple::keylet::skip</a></div><div class="ttdeci">Keylet const  &amp; skip() noexcept</div><div class="ttdoc">The index of the &quot;short&quot; skip list.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00142">Indexes.cpp:142</a></div></div>
<div class="ttc" id="anamespaceripple_html_a04cf5c0dd5329bc0e0203fb86cf91ed3"><div class="ttname"><a href="namespaceripple.html#a04cf5c0dd5329bc0e0203fb86cf91ed3">ripple::getLatestLedger</a></div><div class="ttdeci">std::tuple&lt; std::shared_ptr&lt; Ledger &gt;, std::uint32_t, uint256 &gt; getLatestLedger(Application &amp;app)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01051">Ledger.cpp:1051</a></div></div>
<div class="ttc" id="anamespaceripple_html_a9a1e35684311191adb2870e2d88030fc"><div class="ttname"><a href="namespaceripple.html#a9a1e35684311191adb2870e2d88030fc">ripple::FLAG_LEDGER_INTERVAL</a></div><div class="ttdeci">constexpr std::uint32_t FLAG_LEDGER_INTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00416">Ledger.h:416</a></div></div>
<div class="ttc" id="aclassripple_1_1STObject_html_a6ae7e459a83bc46c3cfd9025753af1cb"><div class="ttname"><a href="classripple_1_1STObject.html#a6ae7e459a83bc46c3cfd9025753af1cb">ripple::STObject::getSerializer</a></div><div class="ttdeci">Serializer getSerializer() const</div><div class="ttdef"><b>Definition:</b> <a href="STObject_8h_source.html#l00367">STObject.h:367</a></div></div>
<div class="ttc" id="aemplace_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/unordered_set/emplace.html">std::unordered_set::emplace</a></div><div class="ttdeci">T emplace(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a196e844a1c5a015af934bd864690a1e2"><div class="ttname"><a href="classripple_1_1Ledger.html#a196e844a1c5a015af934bd864690a1e2">ripple::Ledger::exists</a></div><div class="ttdeci">bool exists(Keylet const &amp;k) const override</div><div class="ttdoc">Determine if a state item exists.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00408">Ledger.cpp:408</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_ad8fefe3e8ad583e1ed1bf02094ac3d8f"><div class="ttname"><a href="classbeast_1_1Journal.html#ad8fefe3e8ad583e1ed1bf02094ac3d8f">beast::Journal::warn</a></div><div class="ttdeci">Stream warn() const</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00327">Journal.h:327</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a8b25859915691946909c9fc87db55753"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8b25859915691946909c9fc87db55753">ripple::Ledger::txs_iter_impl::equal</a></div><div class="ttdeci">bool equal(base_type const &amp;impl) const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00155">Ledger.cpp:155</a></div></div>
<div class="ttc" id="aclassripple_1_1STArray_html_adc3dc750320964c46b6d4ea2af8b8bc7"><div class="ttname"><a href="classripple_1_1STArray.html#adc3dc750320964c46b6d4ea2af8b8bc7">ripple::STArray::push_back</a></div><div class="ttdeci">void push_back(STObject const &amp;object)</div><div class="ttdef"><b>Definition:</b> <a href="STArray_8h_source.html#l00096">STArray.h:96</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a66371f260017cdea7bef8f694a631139"><div class="ttname"><a href="classripple_1_1Ledger.html#a66371f260017cdea7bef8f694a631139">ripple::Ledger::peek</a></div><div class="ttdeci">std::shared_ptr&lt; SLE &gt; peek(Keylet const &amp;k) const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00644">Ledger.cpp:644</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a156082bb161144196934ce455ee404b2"><div class="ttname"><a href="classripple_1_1Ledger.html#a156082bb161144196934ce455ee404b2">ripple::Ledger::invariants</a></div><div class="ttdeci">void invariants() const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01001">Ledger.cpp:1001</a></div></div>
<div class="ttc" id="anamespaceripple_html_aebcad336ac983e05caf01c53d1cacde7"><div class="ttname"><a href="namespaceripple.html#aebcad336ac983e05caf01c53d1cacde7">ripple::roundCloseTime</a></div><div class="ttdeci">std::chrono::time_point&lt; Clock, Duration &gt; roundCloseTime(std::chrono::time_point&lt; Clock, Duration &gt; closeTime, std::chrono::duration&lt; Rep, Period &gt; closeResolution)</div><div class="ttdoc">Calculates the close time for a ledger, given a close time resolution.</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTiming_8h_source.html#l00129">LedgerTiming.h:129</a></div></div>
<div class="ttc" id="atuple_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/tuple.html">std::tuple</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_abb153a1774b651b6784b4103ee69bc6c"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#abb153a1774b651b6784b4103ee69bc6c">ripple::Ledger::txs_iter_impl::operator=</a></div><div class="ttdeci">txs_iter_impl &amp; operator=(txs_iter_impl const &amp;)=delete</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_ac72cd0b23f72fff0b3cd479007b94d10"><div class="ttname"><a href="classripple_1_1Ledger.html#ac72cd0b23f72fff0b3cd479007b94d10">ripple::Ledger::walkLedger</a></div><div class="ttdeci">bool walkLedger(beast::Journal j) const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00763">Ledger.cpp:763</a></div></div>
<div class="ttc" id="aclassripple_1_1JobQueue_html_af5e34187d55aa58e551dc196aaf1ec25"><div class="ttname"><a href="classripple_1_1JobQueue.html#af5e34187d55aa58e551dc196aaf1ec25">ripple::JobQueue::addJob</a></div><div class="ttdeci">bool addJob(JobType type, std::string const &amp;name, JobHandler &amp;&amp;jobHandler)</div><div class="ttdoc">Adds a job to the JobQueue.</div><div class="ttdef"><b>Definition:</b> <a href="JobQueue_8h_source.html#l00165">JobQueue.h:165</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a06608577034840a474361d55624ce9a0"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a06608577034840a474361d55624ce9a0">ripple::LedgerInfo::seq</a></div><div class="ttdeci">LedgerIndex seq</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00092">ReadView.h:92</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a0432690b8a2af03cd14cf6c07561ea53"><div class="ttname"><a href="classripple_1_1Ledger.html#a0432690b8a2af03cd14cf6c07561ea53">ripple::Ledger::rawTxInsert</a></div><div class="ttdeci">void rawTxInsert(uint256 const &amp;key, std::shared_ptr&lt; Serializer const &gt; const &amp;txn, std::shared_ptr&lt; Serializer const &gt; const &amp;metaData) override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00552">Ledger.cpp:552</a></div></div>
<div class="ttc" id="aclassripple_1_1STObject_html_af1235d307d6f464392a583d0dfaa3cc4"><div class="ttname"><a href="classripple_1_1STObject.html#af1235d307d6f464392a583d0dfaa3cc4">ripple::STObject::setFieldVL</a></div><div class="ttdeci">void setFieldVL(SField const &amp;field, Blob const &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="STObject_8cpp_source.html#l00668">STObject.cpp:668</a></div></div>
<div class="ttc" id="aclassripple_1_1PendingSaves_html_a9c7ac1e9824096756225e77ed14244c1"><div class="ttname"><a href="classripple_1_1PendingSaves.html#a9c7ac1e9824096756225e77ed14244c1">ripple::PendingSaves::startWork</a></div><div class="ttdeci">bool startWork(LedgerIndex seq)</div><div class="ttdoc">Start working on a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="PendingSaves_8h_source.html#l00051">PendingSaves.h:51</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a9c90a5db622af7862c7e570e4d29cff5"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c90a5db622af7862c7e570e4d29cff5">ripple::Ledger::txs_iter_impl::txs_iter_impl</a></div><div class="ttdeci">txs_iter_impl(bool metadata, SHAMap::const_iterator iter)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00143">Ledger.cpp:143</a></div></div>
<div class="ttc" id="astructripple_1_1Fees_html_a75648591a2d5bc9e670f1f4081bfdfe0"><div class="ttname"><a href="structripple_1_1Fees.html#a75648591a2d5bc9e670f1f4081bfdfe0">ripple::Fees::reserve</a></div><div class="ttdeci">XRPAmount reserve</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00052">ReadView.h:52</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a27f6d838768ff645f63dbbca85160ab7"><div class="ttname"><a href="classripple_1_1Ledger.html#a27f6d838768ff645f63dbbca85160ab7">ripple::Ledger::rawErase</a></div><div class="ttdeci">void rawErase(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Delete an existing state item.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00516">Ledger.cpp:516</a></div></div>
<div class="ttc" id="anamespaceripple_html_a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae"><div class="ttname"><a href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3ca2b848a8cc886d253d21a77c43cd50aae">ripple::SHAMapType::STATE</a></div><div class="ttdeci">@ STATE</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a57cbdf736a8b80012ded0f3eeac30691"><div class="ttname"><a href="classripple_1_1Ledger.html#a57cbdf736a8b80012ded0f3eeac30691">ripple::Ledger::updateNegativeUNL</a></div><div class="ttdeci">void updateNegativeUNL()</div><div class="ttdoc">update the Negative UNL ledger component.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00712">Ledger.cpp:712</a></div></div>
<div class="ttc" id="aclassripple_1_1Family_html_a195ad5c61d5ef6a5b269232ecea7ca55"><div class="ttname"><a href="classripple_1_1Family.html#a195ad5c61d5ef6a5b269232ecea7ca55">ripple::Family::missingNode</a></div><div class="ttdeci">virtual void missingNode(std::uint32_t refNum)=0</div></div>
<div class="ttc" id="aclassripple_1_1SHAMapLeafNode_html"><div class="ttname"><a href="classripple_1_1SHAMapLeafNode.html">ripple::SHAMapLeafNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SHAMapLeafNode_8h_source.html#l00032">SHAMapLeafNode.h:32</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a1ddad764a35cb7eb22d0b4b62df047d5"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a1ddad764a35cb7eb22d0b4b62df047d5">ripple::LedgerInfo::txHash</a></div><div class="ttdeci">uint256 txHash</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00101">ReadView.h:101</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_aeb716bc6cc0abdf5389e022e2504ba61"><div class="ttname"><a href="classripple_1_1Ledger.html#aeb716bc6cc0abdf5389e022e2504ba61">ripple::Ledger::info_</a></div><div class="ttdeci">LedgerInfo info_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00410">Ledger.h:410</a></div></div>
<div class="ttc" id="aclassripple_1_1RelationalDBInterfacePostgres_html"><div class="ttname"><a href="classripple_1_1RelationalDBInterfacePostgres.html">ripple::RelationalDBInterfacePostgres</a></div><div class="ttdef"><b>Definition:</b> <a href="RelationalDBInterfacePostgres_8h_source.html#l00027">RelationalDBInterfacePostgres.h:27</a></div></div>
<div class="ttc" id="anamespaceripple_html_a16f9dbea9c8dfaaaca124cf61c6b6e6d"><div class="ttname"><a href="namespaceripple.html#a16f9dbea9c8dfaaaca124cf61c6b6e6d">ripple::finishLoadByIndexOrHash</a></div><div class="ttdeci">static void finishLoadByIndexOrHash(std::shared_ptr&lt; Ledger &gt; const &amp;ledger, Config const &amp;config, beast::Journal j)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01035">Ledger.cpp:1035</a></div></div>
<div class="ttc" id="anamespaceripple_html_a224ce479b5c4267f2863235a53508803"><div class="ttname"><a href="namespaceripple.html#a224ce479b5c4267f2863235a53508803">ripple::deserializeTx</a></div><div class="ttdeci">std::shared_ptr&lt; STTx const  &gt; deserializeTx(SHAMapItem const &amp;item)</div><div class="ttdoc">Deserialize a SHAMapItem containing a single STTx.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00382">Ledger.cpp:382</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMapHash_html"><div class="ttname"><a href="classripple_1_1SHAMapHash.html">ripple::SHAMapHash</a></div><div class="ttdef"><b>Definition:</b> <a href="SHAMapTreeNode_8h_source.html#l00048">SHAMapTreeNode.h:48</a></div></div>
<div class="ttc" id="anamespaceripple_html_a355ec605d1063c4316b6f1480359da19"><div class="ttname"><a href="namespaceripple.html#a355ec605d1063c4316b6f1480359da19">ripple::generateKeyPair</a></div><div class="ttdeci">std::pair&lt; PublicKey, SecretKey &gt; generateKeyPair(KeyType type, Seed const &amp;seed)</div><div class="ttdoc">Generate a key pair deterministically.</div><div class="ttdef"><b>Definition:</b> <a href="SecretKey_8cpp_source.html#l00351">SecretKey.cpp:351</a></div></div>
<div class="ttc" id="anamespaceripple_html_a55a2a537e79363b71783d5f6eaca5abf"><div class="ttname"><a href="namespaceripple.html#a55a2a537e79363b71783d5f6eaca5abf">ripple::INITIAL_XRP</a></div><div class="ttdeci">constexpr XRPAmount INITIAL_XRP</div><div class="ttdoc">Configure the native currency.</div><div class="ttdef"><b>Definition:</b> <a href="SystemParameters_8h_source.html#l00043">SystemParameters.h:43</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMapMissingNode_html"><div class="ttname"><a href="classripple_1_1SHAMapMissingNode.html">ripple::SHAMapMissingNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SHAMapMissingNode_8h_source.html#l00055">SHAMapMissingNode.h:55</a></div></div>
<div class="ttc" id="anamespaceripple_html_a356c68147333a9a48a344718038576d9"><div class="ttname"><a href="namespaceripple.html#a356c68147333a9a48a344718038576d9">ripple::uint256</a></div><div class="ttdeci">base_uint&lt; 256 &gt; uint256</div><div class="ttdef"><b>Definition:</b> <a href="base__uint_8h_source.html#l00526">base_uint.h:526</a></div></div>
<div class="ttc" id="aclassripple_1_1detail_1_1ReadViewFwdRange_html_ae3a9cd029d3f92eac0dfe4d2515572e3"><div class="ttname"><a href="classripple_1_1detail_1_1ReadViewFwdRange.html#ae3a9cd029d3f92eac0dfe4d2515572e3">ripple::detail::ReadViewFwdRange&lt; std::shared_ptr&lt; SLE const &gt; &gt;::value_type</a></div><div class="ttdeci">std::shared_ptr&lt; SLE const &gt; value_type</div><div class="ttdef"><b>Definition:</b> <a href="ReadViewFwdRange_8h_source.html#l00137">ReadViewFwdRange.h:137</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a5264190c7219d0bbc42c2b70c386e1ec"><div class="ttname"><a href="classripple_1_1Ledger.html#a5264190c7219d0bbc42c2b70c386e1ec">ripple::Ledger::validatorToDisable</a></div><div class="ttdeci">std::optional&lt; PublicKey &gt; validatorToDisable() const</div><div class="ttdoc">get the to be disabled validator's master public key if any</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00682">Ledger.cpp:682</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_acaf4d523fa7525606f7b1e576cf048c5"><div class="ttname"><a href="classripple_1_1Ledger.html#acaf4d523fa7525606f7b1e576cf048c5">ripple::Ledger::txsEnd</a></div><div class="ttdeci">std::unique_ptr&lt; txs_type::iter_base &gt; txsEnd() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00476">Ledger.cpp:476</a></div></div>
<div class="ttc" id="astructripple_1_1Fees_html_a6d48ec23cfbe4eacac46fbfaa8ce67f9"><div class="ttname"><a href="structripple_1_1Fees.html#a6d48ec23cfbe4eacac46fbfaa8ce67f9">ripple::Fees::increment</a></div><div class="ttdeci">XRPAmount increment</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00053">ReadView.h:53</a></div></div>
<div class="ttc" id="apush_back_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/push_back.html">std::vector::push_back</a></div><div class="ttdeci">T push_back(T... args)</div></div>
<div class="ttc" id="anamespaceripple_html_a91e9fe7a4e92dba79c3812fd3edcaacc"><div class="ttname"><a href="namespaceripple.html#a91e9fe7a4e92dba79c3812fd3edcaacc">ripple::digest</a></div><div class="ttdeci">static Hasher::result_type digest(void const *data, std::size_t size) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="tokens_8cpp_source.html#l00047">tokens.cpp:47</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a8776d1f7ea49b0e25577f5610620c8fc"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a8776d1f7ea49b0e25577f5610620c8fc">ripple::LedgerInfo::closeTime</a></div><div class="ttdeci">NetClock::time_point closeTime</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00123">ReadView.h:123</a></div></div>
<div class="ttc" id="anamespaceripple_html_adc1f8a2c9b47d7c08e671ad3473e9d3a"><div class="ttname"><a href="namespaceripple.html#adc1f8a2c9b47d7c08e671ad3473e9d3a">ripple::publicKeyType</a></div><div class="ttdeci">std::optional&lt; KeyType &gt; publicKeyType(Slice const &amp;slice)</div><div class="ttdoc">Returns the type of public key.</div><div class="ttdef"><b>Definition:</b> <a href="PublicKey_8cpp_source.html#l00203">PublicKey.cpp:203</a></div></div>
<div class="ttc" id="aclassripple_1_1STLedgerEntry_html_a6387602187c2ca4e22297d5c908cbad6"><div class="ttname"><a href="classripple_1_1STLedgerEntry.html#a6387602187c2ca4e22297d5c908cbad6">ripple::STLedgerEntry::key</a></div><div class="ttdeci">uint256 const  &amp; key() const</div><div class="ttdoc">Returns the 'key' (or 'index') of this item.</div><div class="ttdef"><b>Definition:</b> <a href="STLedgerEntry_8h_source.html#l00086">STLedgerEntry.h:86</a></div></div>
<div class="ttc" id="astructripple_1_1Keylet_html_a482983062843a8682fcea76a309c73db"><div class="ttname"><a href="structripple_1_1Keylet.html#a482983062843a8682fcea76a309c73db">ripple::Keylet::key</a></div><div class="ttdeci">uint256 key</div><div class="ttdef"><b>Definition:</b> <a href="Keylet_8h_source.html#l00041">Keylet.h:41</a></div></div>
<div class="ttc" id="aclassripple_1_1base__uint_html"><div class="ttname"><a href="classripple_1_1base__uint.html">ripple::base_uint&lt; 256 &gt;</a></div></div>
<div class="ttc" id="anamespaceripple_html_ae0f54f8ce649d639bf3e2b295347e17aaa4e32e16425bc63db04ed98f3b3f4259"><div class="ttname"><a href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17aaa4e32e16425bc63db04ed98f3b3f4259">ripple::jtPUBOLDLEDGER</a></div><div class="ttdeci">@ jtPUBOLDLEDGER</div><div class="ttdef"><b>Definition:</b> <a href="Job_8h_source.html#l00043">Job.h:43</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a31a21cc451eaa0a5af304e2625dc75f5"><div class="ttname"><a href="classripple_1_1Ledger.html#a31a21cc451eaa0a5af304e2625dc75f5">ripple::Ledger::info</a></div><div class="ttdeci">LedgerInfo const  &amp; info() const override</div><div class="ttdoc">Returns information about the ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00148">Ledger.h:148</a></div></div>
<div class="ttc" id="atime_since_epoch_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch.html">std::chrono::time_point::time_since_epoch</a></div><div class="ttdeci">T time_since_epoch(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1Config_html_a8fdf3fd3b2112759b3a0a7fa4d8afa05"><div class="ttname"><a href="classripple_1_1Config.html#a8fdf3fd3b2112759b3a0a7fa4d8afa05">ripple::Config::reporting</a></div><div class="ttdeci">bool reporting() const</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00276">Config.h:276</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a46a546d8198b17cb9dff3036d920eee4"><div class="ttname"><a href="classripple_1_1Ledger.html#a46a546d8198b17cb9dff3036d920eee4">ripple::Ledger::txExists</a></div><div class="ttdeci">bool txExists(uint256 const &amp;key) const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00482">Ledger.cpp:482</a></div></div>
<div class="ttc" id="anamespaceripple_html_a4574aa8b71b4bb8afc56cf6daff9ca86"><div class="ttname"><a href="namespaceripple.html#a4574aa8b71b4bb8afc56cf6daff9ca86">ripple::saveValidatedLedger</a></div><div class="ttdeci">static bool saveValidatedLedger(Application &amp;app, std::shared_ptr&lt; Ledger const &gt; const &amp;ledger, bool current)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00916">Ledger.cpp:916</a></div></div>
<div class="ttc" id="anamespaceripple_html_a729619e7a3a0d92226e7d52347ff2a5e"><div class="ttname"><a href="namespaceripple.html#a729619e7a3a0d92226e7d52347ff2a5e">ripple::loadByHash</a></div><div class="ttdeci">std::shared_ptr&lt; Ledger &gt; loadByHash(uint256 const &amp;ledgerHash, Application &amp;app, bool acquire)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01074">Ledger.cpp:1074</a></div></div>
<div class="ttc" id="aclassripple_1_1RelationalDBInterface_html_a1704b3edfa1eebb97e2772a1362ef781"><div class="ttname"><a href="classripple_1_1RelationalDBInterface.html#a1704b3edfa1eebb97e2772a1362ef781">ripple::RelationalDBInterface::getLedgerInfoByIndex</a></div><div class="ttdeci">virtual std::optional&lt; LedgerInfo &gt; getLedgerInfoByIndex(LedgerIndex ledgerSeq)=0</div><div class="ttdoc">getLedgerInfoByIndex Returns ledger by its sequence.</div></div>
<div class="ttc" id="aclassripple_1_1base__uint_html_a6fd7dba1ad932f4c1246c9a090c145e5"><div class="ttname"><a href="classripple_1_1base__uint.html#a6fd7dba1ad932f4c1246c9a090c145e5">ripple::base_uint::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="base__uint_8h_source.html#l00508">base_uint.h:508</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_acbcedaa40d8162271cb6e6f37f549e5f"><div class="ttname"><a href="classripple_1_1Ledger.html#acbcedaa40d8162271cb6e6f37f549e5f">ripple::Ledger::setAccepted</a></div><div class="ttdeci">void setAccepted(NetClock::time_point closeTime, NetClock::duration closeResolution, bool correctCloseTime, Config const &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00356">Ledger.cpp:356</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html"><div class="ttname"><a href="classripple_1_1Ledger.html">ripple::Ledger</a></div><div class="ttdoc">Holds a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00076">Ledger.h:76</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a8a75fcab11d8fe2e7bd5cd6643a052e1"><div class="ttname"><a href="classripple_1_1Ledger.html#a8a75fcab11d8fe2e7bd5cd6643a052e1">ripple::Ledger::setFull</a></div><div class="ttdeci">void setFull() const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00292">Ledger.h:292</a></div></div>
<div class="ttc" id="aclassripple_1_1PublicKey_html"><div class="ttname"><a href="classripple_1_1PublicKey.html">ripple::PublicKey</a></div><div class="ttdoc">A public key.</div><div class="ttdef"><b>Definition:</b> <a href="PublicKey_8h_source.html#l00059">PublicKey.h:59</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_a50c370db96b4fdcdd202d9c2c38afce9"><div class="ttname"><a href="namespaceripple_1_1keylet.html#a50c370db96b4fdcdd202d9c2c38afce9">ripple::keylet::account</a></div><div class="ttdeci">Keylet account(AccountID const &amp;id) noexcept</div><div class="ttdoc">AccountID root.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00130">Indexes.cpp:130</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMapItem_html"><div class="ttname"><a href="classripple_1_1SHAMapItem.html">ripple::SHAMapItem</a></div><div class="ttdef"><b>Definition:</b> <a href="SHAMapItem_8h_source.html#l00031">SHAMapItem.h:31</a></div></div>
<div class="ttc" id="aclassripple_1_1Config_html"><div class="ttname"><a href="classripple_1_1Config.html">ripple::Config</a></div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00068">Config.h:68</a></div></div>
<div class="ttc" id="aclassripple_1_1RelationalDBInterface_html_aa2591b2d99a0dcce5e980eb99b1de2a7"><div class="ttname"><a href="classripple_1_1RelationalDBInterface.html#aa2591b2d99a0dcce5e980eb99b1de2a7">ripple::RelationalDBInterface::getLedgerInfoByHash</a></div><div class="ttdeci">virtual std::optional&lt; LedgerInfo &gt; getLedgerInfoByHash(uint256 const &amp;ledgerHash)=0</div><div class="ttdoc">getLedgerInfoByHash Returns info of ledger with given hash.</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_abddbb82136e88fc73b03054df91e8ba6"><div class="ttname"><a href="classripple_1_1Application.html#abddbb82136e88fc73b03054df91e8ba6">ripple::Application::pendingSaves</a></div><div class="ttdeci">virtual PendingSaves &amp; pendingSaves()=0</div></div>
<div class="ttc" id="anamespaceripple_html_aa1353a397900c2af70f9acba924b33cb"><div class="ttname"><a href="namespaceripple.html#aa1353a397900c2af70f9acba924b33cb">ripple::deserializeTxPlusMeta</a></div><div class="ttdeci">std::pair&lt; std::shared_ptr&lt; STTx const  &gt;, std::shared_ptr&lt; STObject const  &gt; &gt; deserializeTxPlusMeta(SHAMapItem const &amp;item)</div><div class="ttdoc">Deserialize a SHAMapItem containing STTx + STObject metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00389">Ledger.cpp:389</a></div></div>
<div class="ttc" id="aclassripple_1_1RelationalDBInterfaceSqlite_html"><div class="ttname"><a href="classripple_1_1RelationalDBInterfaceSqlite.html">ripple::RelationalDBInterfaceSqlite</a></div><div class="ttdef"><b>Definition:</b> <a href="RelationalDBInterfaceSqlite_8h_source.html#l00027">RelationalDBInterfaceSqlite.h:27</a></div></div>
<div class="ttc" id="anamespaceripple_html_a71f5c3f4baec0e09c5eab4d6f5b5efcb"><div class="ttname"><a href="namespaceripple.html#a71f5c3f4baec0e09c5eab4d6f5b5efcb">ripple::calculateLedgerHash</a></div><div class="ttdeci">uint256 calculateLedgerHash(LedgerInfo const &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00065">Ledger.cpp:65</a></div></div>
<div class="ttc" id="aclassripple_1_1Config_html_a7e0651d3c35f2ad3105b673dd4430833"><div class="ttname"><a href="classripple_1_1Config.html#a7e0651d3c35f2ad3105b673dd4430833">ripple::Config::TRANSACTION_FEE_BASE</a></div><div class="ttdeci">static constexpr FeeUnit32 TRANSACTION_FEE_BASE</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00142">Config.h:142</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a67e2c3beee9e7b8e7492d6e1fa51163e"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a67e2c3beee9e7b8e7492d6e1fa51163e">ripple::Ledger::txs_iter_impl::copy</a></div><div class="ttdeci">std::unique_ptr&lt; base_type &gt; copy() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00149">Ledger.cpp:149</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad99788f1aca6ce31a1fe8365eee1bba3"><div class="ttname"><a href="namespaceripple.html#ad99788f1aca6ce31a1fe8365eee1bba3">ripple::Rethrow</a></div><div class="ttdeci">void Rethrow()</div><div class="ttdoc">Rethrow the exception currently being handled.</div><div class="ttdef"><b>Definition:</b> <a href="contract_8h_source.html#l00048">contract.h:48</a></div></div>
<div class="ttc" id="anamespaceripple_html_af14fef7bb70d9e685fdd0df4efc112bf"><div class="ttname"><a href="namespaceripple.html#af14fef7bb70d9e685fdd0df4efc112bf">ripple::sfReserveIncrement</a></div><div class="ttdeci">const SF_UINT32 sfReserveIncrement</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_aca56b7c63030174e59720ab51d739422"><div class="ttname"><a href="classripple_1_1Application.html#aca56b7c63030174e59720ab51d739422">ripple::Application::config</a></div><div class="ttdeci">virtual Config &amp; config()=0</div></div>
<div class="ttc" id="anamespaceripple_html_a38d1749cd010f88da471b4183b2dfe52"><div class="ttname"><a href="namespaceripple.html#a38d1749cd010f88da471b4183b2dfe52">ripple::isCurrent</a></div><div class="ttdeci">bool isCurrent(ValidationParms const &amp;p, NetClock::time_point now, NetClock::time_point signTime, NetClock::time_point seenTime)</div><div class="ttdoc">Whether a validation is still current.</div><div class="ttdef"><b>Definition:</b> <a href="Validations_8h_source.html#l00146">Validations.h:146</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a3edbc55ca2c3810cf38611bc1a3f74ad"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a3edbc55ca2c3810cf38611bc1a3f74ad">ripple::Ledger::txs_iter_impl::iter_</a></div><div class="ttdeci">SHAMap::const_iterator iter_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00134">Ledger.cpp:134</a></div></div>
<div class="ttc" id="aclassripple_1_1Config_html_afa4d9ecf1f0056fb1709770696b036f0"><div class="ttname"><a href="classripple_1_1Config.html#afa4d9ecf1f0056fb1709770696b036f0">ripple::Config::FEE_OWNER_RESERVE</a></div><div class="ttdeci">XRPAmount FEE_OWNER_RESERVE</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00175">Config.h:175</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMap_1_1const__iterator_html"><div class="ttname"><a href="classripple_1_1SHAMap_1_1const__iterator.html">ripple::SHAMap::const_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="SHAMap_8h_source.html#l00593">SHAMap.h:593</a></div></div>
<div class="ttc" id="anamespaceripple_html_a614d8681c8dff84ac2257939751987c5"><div class="ttname"><a href="namespaceripple.html#a614d8681c8dff84ac2257939751987c5">ripple::calcAccountID</a></div><div class="ttdeci">AccountID calcAccountID(PublicKey const &amp;pk)</div><div class="ttdef"><b>Definition:</b> <a href="AccountID_8cpp_source.html#l00080">AccountID.cpp:80</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMap_html"><div class="ttname"><a href="classripple_1_1SHAMap.html">ripple::SHAMap</a></div><div class="ttdoc">A SHAMap is both a radix tree with a fan-out of 16 and a Merkle tree.</div><div class="ttdef"><b>Definition:</b> <a href="SHAMap_8h_source.html#l00095">SHAMap.h:95</a></div></div>
<div class="ttc" id="aclassripple_1_1STArray_html"><div class="ttname"><a href="classripple_1_1STArray.html">ripple::STArray</a></div><div class="ttdef"><b>Definition:</b> <a href="STArray_8h_source.html#l00028">STArray.h:28</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_acd61792241618333e4c3ba6cd807002f"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#acd61792241618333e4c3ba6cd807002f">ripple::Ledger::sles_iter_impl::iter_</a></div><div class="ttdeci">SHAMap::const_iterator iter_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00086">Ledger.cpp:86</a></div></div>
<div class="ttc" id="astructripple_1_1create__genesis__t_html"><div class="ttname"><a href="structripple_1_1create__genesis__t.html">ripple::create_genesis_t</a></div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00044">Ledger.h:44</a></div></div>
<div class="ttc" id="anamespaceripple_html_ae0356b1de00f841c554c830be509dd58a5065e45315e5eab27c63b2dabd8ad150"><div class="ttname"><a href="namespaceripple.html#ae0356b1de00f841c554c830be509dd58a5065e45315e5eab27c63b2dabd8ad150">ripple::SHAMapNodeType::tnTRANSACTION_MD</a></div><div class="ttdeci">@ tnTRANSACTION_MD</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a362b0cb4e326fbf23a38d588c51981ff"><div class="ttname"><a href="classripple_1_1Ledger.html#a362b0cb4e326fbf23a38d588c51981ff">ripple::Ledger::isFlagLedger</a></div><div class="ttdeci">bool isFlagLedger() const</div><div class="ttdoc">Returns true if the ledger is a flag ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00899">Ledger.cpp:899</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_acb3327c3b6206bac3d509d23ada2e831"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#acb3327c3b6206bac3d509d23ada2e831">ripple::Ledger::sles_iter_impl::equal</a></div><div class="ttdeci">bool equal(base_type const &amp;impl) const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00106">Ledger.cpp:106</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a279f72e0664518d5fccd52ed7a92e0da"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a279f72e0664518d5fccd52ed7a92e0da">ripple::LedgerInfo::closeFlags</a></div><div class="ttdeci">int closeFlags</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00114">ReadView.h:114</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_acda0c84e430ff61b71edb7bd155c7fd7"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#acda0c84e430ff61b71edb7bd155c7fd7">ripple::Ledger::sles_iter_impl::operator=</a></div><div class="ttdeci">sles_iter_impl &amp; operator=(sles_iter_impl const &amp;)=delete</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a860be08979e27d8c6f37f722f996ba6c"><div class="ttname"><a href="classripple_1_1Application.html#a860be08979e27d8c6f37f722f996ba6c">ripple::Application::getJobQueue</a></div><div class="ttdeci">virtual JobQueue &amp; getJobQueue()=0</div></div>
<div class="ttc" id="anamespaceripple_html_adb137283775a3eb39772d1decf5c5894"><div class="ttname"><a href="namespaceripple.html#adb137283775a3eb39772d1decf5c5894">ripple::sfValidatorToDisable</a></div><div class="ttdeci">const SF_VL sfValidatorToDisable</div></div>
<div class="ttc" id="aclassripple_1_1Config_html_a2ef24c92845b20ec8be2f79fc9dba500"><div class="ttname"><a href="classripple_1_1Config.html#a2ef24c92845b20ec8be2f79fc9dba500">ripple::Config::FEE_ACCOUNT_RESERVE</a></div><div class="ttdeci">XRPAmount FEE_ACCOUNT_RESERVE</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00174">Config.h:174</a></div></div>
<div class="ttc" id="aclassripple_1_1Serializer_html_a394c3299f6cfcebdaa4bc98ec0c602d6"><div class="ttname"><a href="classripple_1_1Serializer.html#a394c3299f6cfcebdaa4bc98ec0c602d6">ripple::Serializer::slice</a></div><div class="ttdeci">Slice slice() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8h_source.html#l00063">Serializer.h:63</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a7ed6dcfefe77ee7b9e90e052df79e52d"><div class="ttname"><a href="classripple_1_1Ledger.html#a7ed6dcfefe77ee7b9e90e052df79e52d">ripple::Ledger::rawInsert</a></div><div class="ttdeci">void rawInsert(std::shared_ptr&lt; SLE &gt; const &amp;sle) override</div><div class="ttdoc">Unconditionally insert a state item.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00530">Ledger.cpp:530</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_a87d6bd59020d94110027dcab3d9e3357"><div class="ttname"><a href="classbeast_1_1Journal.html#a87d6bd59020d94110027dcab3d9e3357">beast::Journal::info</a></div><div class="ttdeci">Stream info() const</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00321">Journal.h:321</a></div></div>
<div class="ttc" id="atime_point_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/time_point.html">std::chrono::time_point</a></div></div>
<div class="ttc" id="aerase_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/erase.html">std::vector::erase</a></div><div class="ttdeci">T erase(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a136b67ea0189f69434c67ebbbffd8e49"><div class="ttname"><a href="classripple_1_1Ledger.html#a136b67ea0189f69434c67ebbbffd8e49">ripple::Ledger::assertSensible</a></div><div class="ttdeci">bool assertSensible(beast::Journal ledgerJ) const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00811">Ledger.cpp:811</a></div></div>
<div class="ttc" id="aclassripple_1_1Family_html"><div class="ttname"><a href="classripple_1_1Family.html">ripple::Family</a></div><div class="ttdef"><b>Definition:</b> <a href="Family_8h_source.html#l00032">Family.h:32</a></div></div>
<div class="ttc" id="anamespaceripple_html_a6434c1a0fd22b77e2e4a228c0eca79eba43b5c9175984c071f30b873fdce0a000"><div class="ttname"><a href="namespaceripple.html#a6434c1a0fd22b77e2e4a228c0eca79eba43b5c9175984c071f30b873fdce0a000">ripple::ValStatus::current</a></div><div class="ttdeci">@ current</div><div class="ttdoc">This was a new validation and was added.</div></div>
<div class="ttc" id="aclassripple_1_1Job_html"><div class="ttname"><a href="classripple_1_1Job.html">ripple::Job</a></div><div class="ttdef"><b>Definition:</b> <a href="Job_8h_source.html#l00085">Job.h:85</a></div></div>
<div class="ttc" id="aclassripple_1_1SerialIter_html"><div class="ttname"><a href="classripple_1_1SerialIter.html">ripple::SerialIter</a></div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8h_source.html#l00310">Serializer.h:310</a></div></div>
<div class="ttc" id="aclassripple_1_1PendingSaves_html_a50e49f47a9b7bbc2e7875918708b0624"><div class="ttname"><a href="classripple_1_1PendingSaves.html#a50e49f47a9b7bbc2e7875918708b0624">ripple::PendingSaves::finishWork</a></div><div class="ttdeci">void finishWork(LedgerIndex seq)</div><div class="ttdoc">Finish working on a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="PendingSaves_8h_source.html#l00074">PendingSaves.h:74</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html"><div class="ttname"><a href="classbeast_1_1Journal.html">beast::Journal</a></div><div class="ttdoc">A generic endpoint for log messages.</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00058">Journal.h:58</a></div></div>
<div class="ttc" id="ainteger_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_ae1019337912248ae4c0c55fd613ff726"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#ae1019337912248ae4c0c55fd613ff726">ripple::Ledger::sles_iter_impl::sles_iter_impl</a></div><div class="ttdeci">sles_iter_impl()=delete</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a491ee5f53e571bcc2f30fb22f98bf2ea"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a491ee5f53e571bcc2f30fb22f98bf2ea">ripple::Ledger::txs_iter_impl::txs_iter_impl</a></div><div class="ttdeci">txs_iter_impl()=delete</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a25c5bcfcef6f0b9f0de97582ee37797a"><div class="ttname"><a href="classripple_1_1Ledger.html#a25c5bcfcef6f0b9f0de97582ee37797a">ripple::Ledger::isImmutable</a></div><div class="ttdeci">bool isImmutable() const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00276">Ledger.h:276</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMapItem_html_a3f52867a7d3829faede60bf7dd5628ba"><div class="ttname"><a href="classripple_1_1SHAMapItem.html#a3f52867a7d3829faede60bf7dd5628ba">ripple::SHAMapItem::slice</a></div><div class="ttdeci">Slice slice() const</div><div class="ttdef"><b>Definition:</b> <a href="SHAMapItem_8h_source.html#l00051">SHAMapItem.h:51</a></div></div>
<div class="ttc" id="anamespaceripple_html_ae0f54f8ce649d639bf3e2b295347e17aa75c73aafec01f5472607a930d5d1f3b9"><div class="ttname"><a href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17aa75c73aafec01f5472607a930d5d1f3b9">ripple::jtPUBLEDGER</a></div><div class="ttdeci">@ jtPUBLEDGER</div><div class="ttdef"><b>Definition:</b> <a href="Job_8h_source.html#l00057">Job.h:57</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a29434afa7c2ad64e71bb139bdd588191"><div class="ttname"><a href="classripple_1_1Ledger.html#a29434afa7c2ad64e71bb139bdd588191">ripple::Ledger::validatorToReEnable</a></div><div class="ttdeci">std::optional&lt; PublicKey &gt; validatorToReEnable() const</div><div class="ttdoc">get the to be re-enabled validator's master public key if any</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00697">Ledger.cpp:697</a></div></div>
<div class="ttc" id="aclassripple_1_1PendingSaves_html_ab5e9e105f7d12575bc2025468b4cc1f8"><div class="ttname"><a href="classripple_1_1PendingSaves.html#ab5e9e105f7d12575bc2025468b4cc1f8">ripple::PendingSaves::shouldWork</a></div><div class="ttdeci">bool shouldWork(LedgerIndex seq, bool isSynchronous)</div><div class="ttdoc">Check if a ledger should be dispatched.</div><div class="ttdef"><b>Definition:</b> <a href="PendingSaves_8h_source.html#l00099">PendingSaves.h:99</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_ad789f949fc35acd576aac965b20aaaca"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#ad789f949fc35acd576aac965b20aaaca">ripple::LedgerInfo::drops</a></div><div class="ttdeci">XRPAmount drops</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00105">ReadView.h:105</a></div></div>
<div class="ttc" id="aclassripple_1_1STArray_html_a9a8e8e818ee5ba2536921d3e63cda98e"><div class="ttname"><a href="classripple_1_1STArray.html#a9a8e8e818ee5ba2536921d3e63cda98e">ripple::STArray::back</a></div><div class="ttdeci">STObject &amp; back()</div><div class="ttdef"><b>Definition:</b> <a href="STArray_8h_source.html#l00077">STArray.h:77</a></div></div>
<div class="ttc" id="anamespaceripple_html_a9de744cfdefe1132969eb982e57e4ddea82c2b7829b8129e5a2d53665ba4b4757"><div class="ttname"><a href="namespaceripple.html#a9de744cfdefe1132969eb982e57e4ddea82c2b7829b8129e5a2d53665ba4b4757">ripple::KeyType::secp256k1</a></div><div class="ttdeci">@ secp256k1</div></div>
<div class="ttc" id="aclassripple_1_1Serializer_html"><div class="ttname"><a href="classripple_1_1Serializer.html">ripple::Serializer</a></div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8h_source.html#l00039">Serializer.h:39</a></div></div>
<div class="ttc" id="anamespaceripple_html_ad30131b5a5b7cf60d9b392ab868b8c0e"><div class="ttname"><a href="namespaceripple.html#ad30131b5a5b7cf60d9b392ab868b8c0e">ripple::getJson</a></div><div class="ttdeci">Json::Value getJson(LedgerFill const &amp;fill)</div><div class="ttdoc">Return a new Json::Value representing the ledger with given options.</div><div class="ttdef"><b>Definition:</b> <a href="LedgerToJson_8cpp_source.html#l00291">LedgerToJson.cpp:291</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a85c52f6c826b0b32bd773e1d1cfbdb78"><div class="ttname"><a href="classripple_1_1Ledger.html#a85c52f6c826b0b32bd773e1d1cfbdb78">ripple::Ledger::read</a></div><div class="ttdeci">std::shared_ptr&lt; SLE const  &gt; read(Keylet const &amp;k) const override</div><div class="ttdoc">Return the state item associated with a key.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00432">Ledger.cpp:432</a></div></div>
<div class="ttc" id="aclassripple_1_1SHAMapTreeNode_html_a5631e2f77123e3b73229ef4c890ad60f"><div class="ttname"><a href="classripple_1_1SHAMapTreeNode.html#a5631e2f77123e3b73229ef4c890ad60f">ripple::SHAMapTreeNode::makeFromPrefix</a></div><div class="ttdeci">static std::shared_ptr&lt; SHAMapTreeNode &gt; makeFromPrefix(Slice rawNode, SHAMapHash const &amp;hash)</div><div class="ttdef"><b>Definition:</b> <a href="SHAMapTreeNode_8cpp_source.html#l00148">SHAMapTreeNode.cpp:148</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_adefba8f4497f8dc4554dc1e7026e05a2"><div class="ttname"><a href="classripple_1_1Ledger.html#adefba8f4497f8dc4554dc1e7026e05a2">ripple::Ledger::txMap</a></div><div class="ttdeci">SHAMap const  &amp; txMap() const</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00319">Ledger.h:319</a></div></div>
<div class="ttc" id="anamespaceripple_html_a1deca314689daca8b7eb3df5ffd53b74"><div class="ttname"><a href="namespaceripple.html#a1deca314689daca8b7eb3df5ffd53b74">ripple::sfBaseFee</a></div><div class="ttdeci">const SF_UINT64 sfBaseFee</div></div>
<div class="ttc" id="anamespaceripple_html_a2bb299a1db65861baa4c6c1c91cf336f"><div class="ttname"><a href="namespaceripple.html#a2bb299a1db65861baa4c6c1c91cf336f">ripple::getCloseAgree</a></div><div class="ttdeci">bool getCloseAgree(LedgerInfo const &amp;info)</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00418">ReadView.h:418</a></div></div>
<div class="ttc" id="anamespaceripple_html_ab44eddba949c362c1be0f959ee9a2117"><div class="ttname"><a href="namespaceripple.html#ab44eddba949c362c1be0f959ee9a2117">ripple::sfHashes</a></div><div class="ttdeci">const SF_VECTOR256 sfHashes</div></div>
<div class="ttc" id="aclassripple_1_1Config_html_ad12fcadf97f74076f421712b8c95902e"><div class="ttname"><a href="classripple_1_1Config.html#ad12fcadf97f74076f421712b8c95902e">ripple::Config::FEE_DEFAULT</a></div><div class="ttdeci">XRPAmount FEE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00173">Config.h:173</a></div></div>
<div class="ttc" id="anamespaceripple_html_a50df1a645790d124729a6ed973edf519"><div class="ttname"><a href="namespaceripple.html#a50df1a645790d124729a6ed973edf519">ripple::generateSeed</a></div><div class="ttdeci">Seed generateSeed(std::string const &amp;passPhrase)</div><div class="ttdoc">Generate a seed deterministically.</div><div class="ttdef"><b>Definition:</b> <a href="Seed_8cpp_source.html#l00069">Seed.cpp:69</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_ad0ae3a298b1fc8b7b45524f86fed514f"><div class="ttname"><a href="classripple_1_1Ledger.html#ad0ae3a298b1fc8b7b45524f86fed514f">ripple::Ledger::txsBegin</a></div><div class="ttdeci">std::unique_ptr&lt; txs_type::iter_base &gt; txsBegin() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00470">Ledger.cpp:470</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html"><div class="ttname"><a href="classripple_1_1ReadView.html">ripple::ReadView</a></div><div class="ttdoc">A view into a ledger.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00192">ReadView.h:192</a></div></div>
<div class="ttc" id="aemplace_back_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/emplace_back.html">std::vector::emplace_back</a></div><div class="ttdeci">T emplace_back(T... args)</div></div>
<div class="ttc" id="anamespaceripple_html"><div class="ttname"><a href="namespaceripple.html">ripple</a></div><div class="ttdoc">Use hash_* containers for keys that do not need a cryptographically secure hashing algorithm.</div><div class="ttdef"><b>Definition:</b> <a href="RCLCensorshipDetector_8h_source.html#l00029">RCLCensorshipDetector.h:29</a></div></div>
<div class="ttc" id="astructripple_1_1ReadView_1_1sles__type_html"><div class="ttname"><a href="structripple_1_1ReadView_1_1sles__type.html">ripple::ReadView::sles_type</a></div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00202">ReadView.h:202</a></div></div>
<div class="ttc" id="aclassripple_1_1Config_html_ad053293ba571075ebfa6f086ed70fdc5"><div class="ttname"><a href="classripple_1_1Config.html#ad053293ba571075ebfa6f086ed70fdc5">ripple::Config::features</a></div><div class="ttdeci">std::unordered_set&lt; uint256, beast::uhash&lt;&gt; &gt; features</div><div class="ttdef"><b>Definition:</b> <a href="Config_8h_source.html#l00224">Config.h:224</a></div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a25c5851322f6cb3762563fd1278c6143"><div class="ttname"><a href="classripple_1_1Application.html#a25c5851322f6cb3762563fd1278c6143">ripple::Application::getNodeStore</a></div><div class="ttdeci">virtual NodeStore::Database &amp; getNodeStore()=0</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_a2897c28a5b5040e80e66f676d201d03f"><div class="ttname"><a href="classripple_1_1Application.html#a2897c28a5b5040e80e66f676d201d03f">ripple::Application::journal</a></div><div class="ttdeci">virtual beast::Journal journal(std::string const &amp;name)=0</div></div>
<div class="ttc" id="anamespaceripple_html_a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144"><div class="ttname"><a href="namespaceripple.html#a63a883cebf81b764433e67d90d4470d9a86a4fa105ff51b8c3be84734797d8144">ripple::ShardState::acquire</a></div><div class="ttdeci">@ acquire</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a0003b028844c6ac875b7c5f328d0c92e"><div class="ttname"><a href="classripple_1_1Ledger.html#a0003b028844c6ac875b7c5f328d0c92e">ripple::Ledger::setup</a></div><div class="ttdeci">bool setup(Config const &amp;config)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00590">Ledger.cpp:590</a></div></div>
<div class="ttc" id="aclassripple_1_1STArray_html_a12601f465a34c4aba5b9212e747d738d"><div class="ttname"><a href="classripple_1_1STArray.html#a12601f465a34c4aba5b9212e747d738d">ripple::STArray::emplace_back</a></div><div class="ttdeci">void emplace_back(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="STArray_8h_source.html#l00090">STArray.h:90</a></div></div>
<div class="ttc" id="aclassripple_1_1ReadView_html_ac284afc905c482953c35c61b459fd85b"><div class="ttname"><a href="classripple_1_1ReadView.html#ac284afc905c482953c35c61b459fd85b">ripple::ReadView::seq</a></div><div class="ttdeci">LedgerIndex seq() const</div><div class="ttdoc">Returns the sequence number of the base ledger.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00260">ReadView.h:260</a></div></div>
<div class="ttc" id="abegin_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/begin.html">std::vector::begin</a></div><div class="ttdeci">T begin(T... args)</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="anamespaceripple_html_aefd2f77338ce3c9a2fffc4f0b289b483"><div class="ttname"><a href="namespaceripple.html#aefd2f77338ce3c9a2fffc4f0b289b483">ripple::LogicError</a></div><div class="ttdeci">void LogicError(std::string const &amp;how) noexcept</div><div class="ttdoc">Called when faulty logic causes a broken invariant.</div><div class="ttdef"><b>Definition:</b> <a href="contract_8cpp_source.html#l00048">contract.cpp:48</a></div></div>
<div class="ttc" id="astructripple_1_1Fees_html_a28da1f454fe1897cadd3813aaaad4eb7"><div class="ttname"><a href="structripple_1_1Fees.html#a28da1f454fe1897cadd3813aaaad4eb7">ripple::Fees::units</a></div><div class="ttdeci">FeeUnit32 units</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00051">ReadView.h:51</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a069fa542e2614d0046eccbe54bae7976"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a069fa542e2614d0046eccbe54bae7976">ripple::LedgerInfo::closeTimeResolution</a></div><div class="ttdeci">NetClock::duration closeTimeResolution</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00117">ReadView.h:117</a></div></div>
<div class="ttc" id="anamespaceripple_html_ae3f5bc352766a1a8dbf5270eb7dbc2e7"><div class="ttname"><a href="namespaceripple.html#ae3f5bc352766a1a8dbf5270eb7dbc2e7">ripple::sha512Half</a></div><div class="ttdeci">sha512_half_hasher::result_type sha512Half(Args const &amp;... args)</div><div class="ttdoc">Returns the SHA512-Half of a series of objects.</div><div class="ttdef"><b>Definition:</b> <a href="digest_8h_source.html#l00216">digest.h:216</a></div></div>
<div class="ttc" id="anamespaceripple_html_a2995be43488ad73c05c5541036d99d5a"><div class="ttname"><a href="namespaceripple.html#a2995be43488ad73c05c5541036d99d5a">ripple::create_genesis</a></div><div class="ttdeci">const create_genesis_t create_genesis</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00062">Ledger.cpp:62</a></div></div>
<div class="ttc" id="acassert_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/header/cassert.html">cassert</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a6608f7b02e1d18d06e27f28c5ce296d9"><div class="ttname"><a href="classripple_1_1Ledger.html#a6608f7b02e1d18d06e27f28c5ce296d9">ripple::Ledger::stateMap_</a></div><div class="ttdeci">std::shared_ptr&lt; SHAMap &gt; stateMap_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00403">Ledger.h:403</a></div></div>
<div class="ttc" id="anamespaceripple_html_a25781d261e5e805fdf2834ab4af7be30"><div class="ttname"><a href="namespaceripple.html#a25781d261e5e805fdf2834ab4af7be30">ripple::sfDisabledValidator</a></div><div class="ttdeci">const SField sfDisabledValidator</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_ae29576f2d8dc2685c53f5dc18c7925f8"><div class="ttname"><a href="classripple_1_1Ledger.html#ae29576f2d8dc2685c53f5dc18c7925f8">ripple::Ledger::updateSkipList</a></div><div class="ttdeci">void updateSkipList()</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00835">Ledger.cpp:835</a></div></div>
<div class="ttc" id="aclassripple_1_1SerialIter_html_aa97628bd129c57f172027982c0ac4f1f"><div class="ttname"><a href="classripple_1_1SerialIter.html#aa97628bd129c57f172027982c0ac4f1f">ripple::SerialIter::getVLDataLength</a></div><div class="ttdeci">int getVLDataLength()</div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8cpp_source.html#l00470">Serializer.cpp:470</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a131fb72a0a470e6b493865f9a06762c4"><div class="ttname"><a href="classripple_1_1Ledger.html#a131fb72a0a470e6b493865f9a06762c4">ripple::Ledger::open</a></div><div class="ttdeci">bool open() const override</div><div class="ttdoc">Returns true if this reflects an open ledger.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00142">Ledger.h:142</a></div></div>
<div class="ttc" id="anamespaceripple_html_ab8a9c54401e8209fca7396c6b9c610f4"><div class="ttname"><a href="namespaceripple.html#ab8a9c54401e8209fca7396c6b9c610f4">ripple::sfBalance</a></div><div class="ttdeci">const SF_AMOUNT sfBalance</div></div>
<div class="ttc" id="acount_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/duration/count.html">std::chrono::duration::count</a></div><div class="ttdeci">T count(T... args)</div></div>
<div class="ttc" id="anamespaceripple_html_a4b768acab2bb710274a46ca13815564f"><div class="ttname"><a href="namespaceripple.html#a4b768acab2bb710274a46ca13815564f">ripple::sfReferenceFeeUnits</a></div><div class="ttdeci">const SF_UINT32 sfReferenceFeeUnits</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a7840997ea1a065fd634c1ed715c5b327"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a7840997ea1a065fd634c1ed715c5b327">ripple::Ledger::txs_iter_impl::metadata_</a></div><div class="ttdeci">bool metadata_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00133">Ledger.cpp:133</a></div></div>
<div class="ttc" id="aclassripple_1_1STVector256_html"><div class="ttname"><a href="classripple_1_1STVector256.html">ripple::STVector256</a></div><div class="ttdef"><b>Definition:</b> <a href="STVector256_8h_source.html#l00029">STVector256.h:29</a></div></div>
<div class="ttc" id="aclassripple_1_1RelationalDBInterface_html_a1cf137dce25e130bffe96e816ab67408"><div class="ttname"><a href="classripple_1_1RelationalDBInterface.html#a1cf137dce25e130bffe96e816ab67408">ripple::RelationalDBInterface::getNewestLedgerInfo</a></div><div class="ttdeci">virtual std::optional&lt; LedgerInfo &gt; getNewestLedgerInfo()=0</div><div class="ttdoc">getNewestLedgerInfo Returns info of newest saved ledger.</div></div>
<div class="ttc" id="aclassripple_1_1Serializer_html_a9d465161cb77936bd75a3d034d2b5b72"><div class="ttname"><a href="classripple_1_1Serializer.html#a9d465161cb77936bd75a3d034d2b5b72">ripple::Serializer::addVL</a></div><div class="ttdeci">int addVL(Blob const &amp;vector)</div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8cpp_source.html#l00200">Serializer.cpp:200</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a45759e4c24e5344b58ae80158834d8ec"><div class="ttname"><a href="classripple_1_1Ledger.html#a45759e4c24e5344b58ae80158834d8ec">ripple::Ledger::negativeUNL</a></div><div class="ttdeci">hash_set&lt; PublicKey &gt; negativeUNL() const</div><div class="ttdoc">get Negative UNL validators' master public keys</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00656">Ledger.cpp:656</a></div></div>
<div class="ttc" id="aempty_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector/empty.html">std::vector::empty</a></div><div class="ttdeci">T empty(T... args)</div></div>
<div class="ttc" id="aclassripple_1_1Rules_html"><div class="ttname"><a href="classripple_1_1Rules.html">ripple::Rules</a></div><div class="ttdoc">Rules controlling protocol behavior.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00131">ReadView.h:131</a></div></div>
<div class="ttc" id="anamespaceripple_html_a5d9fe757c37a7602a883d30b14e1bf3c"><div class="ttname"><a href="namespaceripple.html#a5d9fe757c37a7602a883d30b14e1bf3c">ripple::SHAMapType</a></div><div class="ttdeci">SHAMapType</div><div class="ttdef"><b>Definition:</b> <a href="SHAMapMissingNode_8h_source.html#l00032">SHAMapMissingNode.h:32</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html">ripple::Ledger::txs_iter_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00130">Ledger.cpp:130</a></div></div>
<div class="ttc" id="aoptional_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional</a></div></div>
<div class="ttc" id="aclassbeast_1_1Journal_html_a556228cb60bcf405c225d3f64b7b01ae"><div class="ttname"><a href="classbeast_1_1Journal.html#a556228cb60bcf405c225d3f64b7b01ae">beast::Journal::debug</a></div><div class="ttdeci">Stream debug() const</div><div class="ttdef"><b>Definition:</b> <a href="Journal_8h_source.html#l00315">Journal.h:315</a></div></div>
<div class="ttc" id="anamespaceripple_html_ae0f54f8ce649d639bf3e2b295347e17a"><div class="ttname"><a href="namespaceripple.html#ae0f54f8ce649d639bf3e2b295347e17a">ripple::JobType</a></div><div class="ttdeci">JobType</div><div class="ttdef"><b>Definition:</b> <a href="Job_8h_source.html#l00034">Job.h:34</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_ac58ecac7b057504ea6c1706c0ee04623"><div class="ttname"><a href="namespaceripple_1_1keylet.html#ac58ecac7b057504ea6c1706c0ee04623">ripple::keylet::fees</a></div><div class="ttdeci">Keylet const  &amp; fees() noexcept</div><div class="ttdoc">The (fixed) index of the object containing the ledger fees.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00168">Indexes.cpp:168</a></div></div>
<div class="ttc" id="anamespaceripple_html_af9776f187d3686a7fba4c2d2fbeebdf4"><div class="ttname"><a href="namespaceripple.html#af9776f187d3686a7fba4c2d2fbeebdf4">ripple::to_string</a></div><div class="ttdeci">std::string to_string(Manifest const &amp;m)</div><div class="ttdoc">Format the specified manifest to a string for debugging purposes.</div><div class="ttdef"><b>Definition:</b> <a href="app_2misc_2impl_2Manifest_8cpp_source.html#l00039">app/misc/impl/Manifest.cpp:39</a></div></div>
<div class="ttc" id="anamespaceripple_html_a09147d6c9f73ea585dcd8d71779102a0"><div class="ttname"><a href="namespaceripple.html#a09147d6c9f73ea585dcd8d71779102a0">ripple::ledgerGenesisTimeResolution</a></div><div class="ttdeci">constexpr auto ledgerGenesisTimeResolution</div><div class="ttdoc">Close time resolution in genesis ledger.</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTiming_8h_source.html#l00047">LedgerTiming.h:47</a></div></div>
<div class="ttc" id="astructripple_1_1Keylet_html_a1e8ccd4a50a894a338c789fc566d8802"><div class="ttname"><a href="structripple_1_1Keylet.html#a1e8ccd4a50a894a338c789fc566d8802">ripple::Keylet::check</a></div><div class="ttdeci">bool check(STLedgerEntry const &amp;) const</div><div class="ttdoc">Returns true if the SLE matches the type.</div><div class="ttdef"><b>Definition:</b> <a href="Keylet_8cpp_source.html#l00026">Keylet.cpp:26</a></div></div>
<div class="ttc" id="anamespaceripple_html_a5bab99595719d22579e10d21cf048eb0"><div class="ttname"><a href="namespaceripple.html#a5bab99595719d22579e10d21cf048eb0">ripple::sfAccount</a></div><div class="ttdeci">const SF_ACCOUNT sfAccount</div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html"><div class="ttname"><a href="structripple_1_1LedgerInfo.html">ripple::LedgerInfo</a></div><div class="ttdoc">Information about the notional ledger backing the view.</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00084">ReadView.h:84</a></div></div>
<div class="ttc" id="anamespaceripple_html_a769291ba9f7a5f5ba7a389c395e83a3c"><div class="ttname"><a href="namespaceripple.html#a769291ba9f7a5f5ba7a389c395e83a3c">ripple::getNextLedgerTimeResolution</a></div><div class="ttdeci">std::chrono::duration&lt; Rep, Period &gt; getNextLedgerTimeResolution(std::chrono::duration&lt; Rep, Period &gt; previousResolution, bool previousAgree, Seq ledgerSeq)</div><div class="ttdoc">Calculates the close time resolution for the specified ledger.</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTiming_8h_source.html#l00080">LedgerTiming.h:80</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_aa7a5631ff08a7cf45c966d70fd9d3f01"><div class="ttname"><a href="classripple_1_1Ledger.html#aa7a5631ff08a7cf45c966d70fd9d3f01">ripple::Ledger::rawTxInsertWithHash</a></div><div class="ttdeci">uint256 rawTxInsertWithHash(uint256 const &amp;key, std::shared_ptr&lt; Serializer const &gt; const &amp;txn, std::shared_ptr&lt; Serializer const &gt; const &amp;metaData)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00570">Ledger.cpp:570</a></div></div>
<div class="ttc" id="anamespaceripple_html_a628c597be4a050e3957be56ec78df01a"><div class="ttname"><a href="namespaceripple.html#a628c597be4a050e3957be56ec78df01a">ripple::sfLastLedgerSequence</a></div><div class="ttdeci">const SF_UINT32 sfLastLedgerSequence</div></div>
<div class="ttc" id="anamespaceripple_html_a8d9f578e31d5fdf0e82150bc1a4ce374"><div class="ttname"><a href="namespaceripple.html#a8d9f578e31d5fdf0e82150bc1a4ce374">ripple::ledgerDefaultTimeResolution</a></div><div class="ttdeci">constexpr auto ledgerDefaultTimeResolution</div><div class="ttdoc">Initial resolution of ledger close time.</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTiming_8h_source.html#l00044">LedgerTiming.h:44</a></div></div>
<div class="ttc" id="anamespaceripple_1_1keylet_html_a53590de263224dde45f4856da2852319"><div class="ttname"><a href="namespaceripple_1_1keylet.html#a53590de263224dde45f4856da2852319">ripple::keylet::negativeUNL</a></div><div class="ttdeci">Keylet const  &amp; negativeUNL() noexcept</div><div class="ttdoc">The (fixed) index of the object containing the ledger negativeUNL.</div><div class="ttdef"><b>Definition:</b> <a href="Indexes_8cpp_source.html#l00176">Indexes.cpp:176</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a8525f8ae51dd1e6f0e5a225a3eb207d4"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a8525f8ae51dd1e6f0e5a225a3eb207d4">ripple::Ledger::txs_iter_impl::dereference</a></div><div class="ttdeci">txs_type::value_type dereference() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00169">Ledger.cpp:169</a></div></div>
<div class="ttc" id="anamespaceripple_html_afd9c0655540fb85bcc173ec81c7c7290"><div class="ttname"><a href="namespaceripple.html#afd9c0655540fb85bcc173ec81c7c7290">ripple::pendSaveValidated</a></div><div class="ttdeci">bool pendSaveValidated(Application &amp;app, std::shared_ptr&lt; Ledger const &gt; const &amp;ledger, bool isSynchronous, bool isCurrent)</div><div class="ttdoc">Save, or arrange to save, a fully-validated ledger Returns false on error.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00944">Ledger.cpp:944</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_afbe1eed445f88d1c62e0f11bb0289ce5"><div class="ttname"><a href="classripple_1_1Ledger.html#afbe1eed445f88d1c62e0f11bb0289ce5">ripple::Ledger::Ledger</a></div><div class="ttdeci">Ledger(Ledger const &amp;)=delete</div></div>
<div class="ttc" id="aunique_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a></div><div class="ttdoc">STL class.</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_a68cfe4a8abf683e2d6909f0d96013d8f"><div class="ttname"><a href="classripple_1_1Ledger.html#a68cfe4a8abf683e2d6909f0d96013d8f">ripple::Ledger::digest</a></div><div class="ttdeci">std::optional&lt; digest_type &gt; digest(key_type const &amp;key) const override</div><div class="ttdoc">Return the digest associated with the key.</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00503">Ledger.cpp:503</a></div></div>
<div class="ttc" id="anamespaceripple_html_a56e0cc999ed456f36e9662a4fcae5061"><div class="ttname"><a href="namespaceripple.html#a56e0cc999ed456f36e9662a4fcae5061">ripple::loadLedgerHelper</a></div><div class="ttdeci">std::shared_ptr&lt; Ledger &gt; loadLedgerHelper(LedgerInfo const &amp;info, Application &amp;app, bool acquire)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01017">Ledger.cpp:1017</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1txs__iter__impl_html_a9c6b87e4c02e4538f5c86b8aa8f553a9"><div class="ttname"><a href="classripple_1_1Ledger_1_1txs__iter__impl.html#a9c6b87e4c02e4538f5c86b8aa8f553a9">ripple::Ledger::txs_iter_impl::increment</a></div><div class="ttdeci">void increment() override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00163">Ledger.cpp:163</a></div></div>
<div class="ttc" id="aclassripple_1_1STObject_html_acd1aac04649d694a3524faf2ddebf843"><div class="ttname"><a href="classripple_1_1STObject.html#acd1aac04649d694a3524faf2ddebf843">ripple::STObject::setFieldU32</a></div><div class="ttdeci">void setFieldU32(SField const &amp;field, std::uint32_t)</div><div class="ttdef"><b>Definition:</b> <a href="STObject_8cpp_source.html#l00632">STObject.cpp:632</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_a0adbe4008ec68f0ae01b503356c35abb"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#a0adbe4008ec68f0ae01b503356c35abb">ripple::Ledger::sles_iter_impl::copy</a></div><div class="ttdeci">std::unique_ptr&lt; base_type &gt; copy() const override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00100">Ledger.cpp:100</a></div></div>
<div class="ttc" id="anamespaceripple_html_a1b20cb9afe194d709bbeae9cc15fb180"><div class="ttname"><a href="namespaceripple.html#a1b20cb9afe194d709bbeae9cc15fb180">ripple::sfDisabledValidators</a></div><div class="ttdeci">const SField sfDisabledValidators</div></div>
<div class="ttc" id="anamespaceripple_html_a16991de33a4e83d355de9c387c712a4e"><div class="ttname"><a href="namespaceripple.html#a16991de33a4e83d355de9c387c712a4e">ripple::sfPublicKey</a></div><div class="ttdeci">const SF_VL sfPublicKey</div></div>
<div class="ttc" id="aclassripple_1_1Application_html_ab7873738f31780e68f0d12d87fc35356"><div class="ttname"><a href="classripple_1_1Application.html#ab7873738f31780e68f0d12d87fc35356">ripple::Application::getHashRouter</a></div><div class="ttdeci">virtual HashRouter &amp; getHashRouter()=0</div></div>
<div class="ttc" id="aclassripple_1_1Ledger_1_1sles__iter__impl_html_ab913201f79f9497327a00d09250f060d"><div class="ttname"><a href="classripple_1_1Ledger_1_1sles__iter__impl.html#ab913201f79f9497327a00d09250f060d">ripple::Ledger::sles_iter_impl::increment</a></div><div class="ttdeci">void increment() override</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l00114">Ledger.cpp:114</a></div></div>
<div class="ttc" id="aclassripple_1_1HashRouter_html_ac43309b8c10713823bdc233f39931472"><div class="ttname"><a href="classripple_1_1HashRouter.html#ac43309b8c10713823bdc233f39931472">ripple::HashRouter::setFlags</a></div><div class="ttdeci">bool setFlags(uint256 const &amp;key, int flags)</div><div class="ttdoc">Set the flags on a hash.</div><div class="ttdef"><b>Definition:</b> <a href="HashRouter_8cpp_source.html#l00102">HashRouter.cpp:102</a></div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_aadfc3fc0c7935a8705f3e9ab0c49b9d5"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#aadfc3fc0c7935a8705f3e9ab0c49b9d5">ripple::LedgerInfo::accountHash</a></div><div class="ttdeci">uint256 accountHash</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00102">ReadView.h:102</a></div></div>
<div class="ttc" id="aclassripple_1_1Ledger_html_af4bf506cca6878c107a9f4bc44570b0c"><div class="ttname"><a href="classripple_1_1Ledger.html#af4bf506cca6878c107a9f4bc44570b0c">ripple::Ledger::rules_</a></div><div class="ttdeci">Rules rules_</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8h_source.html#l00409">Ledger.h:409</a></div></div>
<div class="ttc" id="astructripple_1_1Fees_html_a64c9587f977c872e926a58401d7d8224"><div class="ttname"><a href="structripple_1_1Fees.html#a64c9587f977c872e926a58401d7d8224">ripple::Fees::base</a></div><div class="ttdeci">XRPAmount base</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00050">ReadView.h:50</a></div></div>
<div class="ttc" id="aclassripple_1_1SerialIter_html_a4131424f0e083369a1e562a5437d56e8"><div class="ttname"><a href="classripple_1_1SerialIter.html#a4131424f0e083369a1e562a5437d56e8">ripple::SerialIter::getSlice</a></div><div class="ttdeci">Slice getSlice(std::size_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="Serializer_8cpp_source.html#l00495">Serializer.cpp:495</a></div></div>
<div class="ttc" id="aclassJson_1_1Value_html"><div class="ttname"><a href="classJson_1_1Value.html">Json::Value</a></div><div class="ttdoc">Represents a JSON value.</div><div class="ttdef"><b>Definition:</b> <a href="json__value_8h_source.html#l00145">json_value.h:145</a></div></div>
<div class="ttc" id="anamespaceripple_html_a0b616ffc6eaba434ad7f8b79289ee71f"><div class="ttname"><a href="namespaceripple.html#a0b616ffc6eaba434ad7f8b79289ee71f">ripple::sfAmendments</a></div><div class="ttdeci">const SF_VECTOR256 sfAmendments</div></div>
<div class="ttc" id="anamespaceripple_html_a5dcc3d768f53682f15005454f36248bf"><div class="ttname"><a href="namespaceripple.html#a5dcc3d768f53682f15005454f36248bf">ripple::sLCF_NoConsensusTime</a></div><div class="ttdeci">static const std::uint32_t sLCF_NoConsensusTime</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00415">ReadView.h:415</a></div></div>
<div class="ttc" id="anamespaceripple_html_a886ed36db831a964fc5f66ebbb4fe3d0"><div class="ttname"><a href="namespaceripple.html#a886ed36db831a964fc5f66ebbb4fe3d0">ripple::open</a></div><div class="ttdeci">void open(soci::session &amp;s, BasicConfig const &amp;config, std::string const &amp;dbName)</div><div class="ttdoc">Open a soci session.</div><div class="ttdef"><b>Definition:</b> <a href="SociDB_8cpp_source.html#l00098">SociDB.cpp:98</a></div></div>
<div class="ttc" id="anamespaceripple_html_a1f8ed5b1b502a174e0dec8728905cd1e"><div class="ttname"><a href="namespaceripple.html#a1f8ed5b1b502a174e0dec8728905cd1e">ripple::getTxHashes</a></div><div class="ttdeci">std::vector&lt; uint256 &gt; getTxHashes(std::shared_ptr&lt; PgPool &gt; const &amp;pgPool, LedgerIndex seq, Application &amp;app)</div><div class="ttdoc">getTxHashes Returns vector of tx hashes by given ledger sequence</div><div class="ttdef"><b>Definition:</b> <a href="RelationalDBInterface__postgres_8cpp_source.html#l00330">RelationalDBInterface_postgres.cpp:330</a></div></div>
<div class="ttc" id="anamespaceripple_html_a99725c9e6e92c48aeea784b5db6400fb"><div class="ttname"><a href="namespaceripple.html#a99725c9e6e92c48aeea784b5db6400fb">ripple::sfValidatorToReEnable</a></div><div class="ttdeci">const SF_VL sfValidatorToReEnable</div></div>
<div class="ttc" id="astructripple_1_1LedgerInfo_html_a3f7b6fb6d401cfc76e0179b061e02eb4"><div class="ttname"><a href="structripple_1_1LedgerInfo.html#a3f7b6fb6d401cfc76e0179b061e02eb4">ripple::LedgerInfo::parentCloseTime</a></div><div class="ttdeci">NetClock::time_point parentCloseTime</div><div class="ttdef"><b>Definition:</b> <a href="ReadView_8h_source.html#l00093">ReadView.h:93</a></div></div>
<div class="ttc" id="anamespaceripple_html_a6328c469eb804b05c66c8c140d470ba5"><div class="ttname"><a href="namespaceripple.html#a6328c469eb804b05c66c8c140d470ba5">ripple::flatFetchTransactions</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; std::shared_ptr&lt; STTx const  &gt;, std::shared_ptr&lt; STObject const  &gt; &gt; &gt; flatFetchTransactions(Application &amp;app, std::vector&lt; uint256 &gt; &amp;nodestoreHashes)</div><div class="ttdef"><b>Definition:</b> <a href="Ledger_8cpp_source.html#l01089">Ledger.cpp:1089</a></div></div>
<div class="ttc" id="anow_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/chrono/system_clock/now.html">std::chrono::system_clock::now</a></div><div class="ttdeci">T now(T... args)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
