<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rippled: ripple::LedgerTrie&lt; Ledger &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rippled
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceripple.html">ripple</a></li><li class="navelem"><a class="el" href="classripple_1_1LedgerTrie.html">LedgerTrie</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classripple_1_1LedgerTrie-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ripple::LedgerTrie&lt; Ledger &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Ancestry trie of ledgers.  
 <a href="classripple_1_1LedgerTrie.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ripple::LedgerTrie&lt; Ledger &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classripple_1_1LedgerTrie__coll__graph.png" border="0" usemap="#ripple_1_1LedgerTrie_3_01Ledger_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="ripple_1_1LedgerTrie_3_01Ledger_01_4_coll__map" id="ripple_1_1LedgerTrie_3_01Ledger_01_4_coll__map">
<area shape="rect" title="Ancestry trie of ledgers." alt="" coords="2769,32,2903,73"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/container/map.html" title=" " alt="" coords="471,17,617,58"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/types/integer.html" title=" " alt="" coords="5,952,108,979"/>
<area shape="rect" href="structripple_1_1ledger__trie__detail_1_1Node.html" title=" " alt="" coords="2209,126,2392,168"/>
<area shape="rect" href="classripple_1_1SHAMap.html" title="A SHAMap is both a radix tree with a fan&#45;out of 16 and a Merkle tree." alt="" coords="1043,1239,1165,1266"/>
<area shape="rect" href="classripple_1_1SHAMapTreeNode.html" title=" " alt="" coords="243,1234,425,1260"/>
<area shape="rect" href="structripple_1_1LedgerInfo.html" title="Information about the notional ledger backing the view." alt="" coords="1036,1008,1172,1035"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/container/array.html" title=" " alt="" coords="250,986,418,1028"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html" title=" " alt="" coords="2463,70,2633,126"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/container/vector.html" title=" " alt="" coords="2747,106,2925,162"/>
<area shape="rect" href="classripple_1_1ledger__trie__detail_1_1Span.html" title=" " alt="" coords="1967,386,2125,442"/>
<area shape="rect" href="classripple_1_1Ledger.html" title="Holds a ledger." alt="" coords="1714,864,1825,891"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this.html" title=" " alt="" coords="1360,660,1525,701"/>
<area shape="rect" href="classripple_1_1DigestAwareReadView.html" title="ReadView that associates keys with digests." alt="" coords="1336,726,1549,752"/>
<area shape="rect" href="classripple_1_1ReadView.html" title="A view into a ledger." alt="" coords="1039,538,1169,564"/>
<area shape="rect" href="classripple_1_1detail_1_1ReadViewFwdRange.html" title=" " alt="" coords="1355,450,1531,506"/>
<area shape="rect" href="classripple_1_1detail_1_1ReadViewFwdRange.html" title=" " alt="" coords="1355,530,1531,572"/>
<area shape="rect" href="structripple_1_1ReadView_1_1sles__type.html" title=" " alt="" coords="1669,426,1869,452"/>
<area shape="rect" href="structripple_1_1ReadView_1_1txs__type.html" title=" " alt="" coords="1672,574,1867,600"/>
<area shape="rect" href="classripple_1_1TxsRawView.html" title="Interface for changing ledger entries with transactions." alt="" coords="1367,776,1518,803"/>
<area shape="rect" href="classripple_1_1RawView.html" title="Interface for ledger entry changes." alt="" coords="1041,776,1167,803"/>
<area shape="rect" href="classripple_1_1CountedObject.html" title=" " alt="" coords="1361,828,1524,869"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html" title=" " alt="" coords="1357,1114,1528,1156"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html" title=" " alt="" coords="651,1232,821,1273"/>
<area shape="rect" href="classripple_1_1Family.html" title=" " alt="" coords="681,1298,791,1324"/>
<area shape="rect" href="classbeast_1_1Journal.html" title="A generic endpoint for log messages." alt="" coords="681,1348,791,1375"/>
<area shape="rect" href="classbeast_1_1Journal_1_1Sink.html" title="Abstraction for the underlying message destination." alt="" coords="261,1348,407,1375"/>
<area shape="rect" href="classripple_1_1Rules.html" title="Rules controlling protocol behavior." alt="" coords="1391,1268,1494,1295"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html" title=" " alt="" coords="1019,1364,1189,1405"/>
<area shape="rect" href="classripple_1_1Rules_1_1Impl.html" title=" " alt="" coords="667,1399,805,1426"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/thread/mutex.html" title="STL class." alt="" coords="1397,956,1489,983"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/chrono/duration.html" title=" " alt="" coords="658,1114,814,1156"/>
<area shape="rect" href="classripple_1_1XRPAmount.html" title=" " alt="" coords="665,826,807,852"/>
<area shape="rect" href="structripple_1_1Fees.html" title="Reflects the fee settings for a particular ledger." alt="" coords="1056,827,1152,854"/>
<area shape="rect" title=" " alt="" coords="251,818,417,860"/>
<area shape="rect" title=" " alt="" coords="221,884,447,911"/>
<area shape="rect" title=" " alt="" coords="229,636,439,677"/>
<area shape="rect" title=" " alt="" coords="227,701,441,742"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/types/integer.html" title=" " alt="" coords="287,767,381,794"/>
<area shape="rect" href="classripple_1_1base__uint.html" title=" " alt="" coords="665,984,807,1025"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/types/size_t.html" title=" " alt="" coords="290,1052,378,1079"/>
<area shape="rect" href="http://en.cppreference.com/w/cpp/chrono/time_point.html" title=" " alt="" coords="650,1049,822,1090"/>
<area shape="rect" href="classripple_1_1feeunit_1_1TaggedFee.html" title=" " alt="" coords="641,382,831,424"/>
<area shape="rect" title=" " alt="" coords="239,408,429,464"/>
<area shape="rect" title=" " alt="" coords="233,489,435,530"/>
<area shape="rect" title=" " alt="" coords="233,555,435,611"/>
<area shape="rect" title=" " alt="" coords="241,131,427,187"/>
<area shape="rect" title=" " alt="" coords="231,212,437,253"/>
<area shape="rect" title=" " alt="" coords="239,278,429,334"/>
<area shape="rect" title=" " alt="" coords="315,358,353,384"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1954c535064295e4e386a9c4542f6b73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a1954c535064295e4e386a9c4542f6b73">LedgerTrie</a> ()</td></tr>
<tr class="separator:a1954c535064295e4e386a9c4542f6b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e81099b1cded82b5d679a80f646ae2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a83e81099b1cded82b5d679a80f646ae2">insert</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger, <a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> count=1)</td></tr>
<tr class="memdesc:a83e81099b1cded82b5d679a80f646ae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert and/or increment the support for the given ledger.  <a href="classripple_1_1LedgerTrie.html#a83e81099b1cded82b5d679a80f646ae2">More...</a><br /></td></tr>
<tr class="separator:a83e81099b1cded82b5d679a80f646ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39438d885031f58c1045ad727823121"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#ae39438d885031f58c1045ad727823121">remove</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger, <a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> count=1)</td></tr>
<tr class="memdesc:ae39438d885031f58c1045ad727823121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease support for a ledger, removing and compressing if possible.  <a href="classripple_1_1LedgerTrie.html#ae39438d885031f58c1045ad727823121">More...</a><br /></td></tr>
<tr class="separator:ae39438d885031f58c1045ad727823121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d723672c2cc27ee8815f4d3ce1d82eb"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a6d723672c2cc27ee8815f4d3ce1d82eb">tipSupport</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger) const</td></tr>
<tr class="memdesc:a6d723672c2cc27ee8815f4d3ce1d82eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return count of tip support for the specific ledger.  <a href="classripple_1_1LedgerTrie.html#a6d723672c2cc27ee8815f4d3ce1d82eb">More...</a><br /></td></tr>
<tr class="separator:a6d723672c2cc27ee8815f4d3ce1d82eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab309fde8ae0efdd1945604cf12c7781e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#ab309fde8ae0efdd1945604cf12c7781e">branchSupport</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger) const</td></tr>
<tr class="memdesc:ab309fde8ae0efdd1945604cf12c7781e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the count of branch support for the specific ledger.  <a href="classripple_1_1LedgerTrie.html#ab309fde8ae0efdd1945604cf12c7781e">More...</a><br /></td></tr>
<tr class="separator:ab309fde8ae0efdd1945604cf12c7781e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db8ef88a24566a57fe4711177e87da8"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional</a>&lt; <a class="el" href="classripple_1_1SpanTip.html">SpanTip</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a3db8ef88a24566a57fe4711177e87da8">getPreferred</a> (<a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> const largestIssued) const</td></tr>
<tr class="memdesc:a3db8ef88a24566a57fe4711177e87da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the preferred ledger ID.  <a href="classripple_1_1LedgerTrie.html#a3db8ef88a24566a57fe4711177e87da8">More...</a><br /></td></tr>
<tr class="separator:a3db8ef88a24566a57fe4711177e87da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dabb9996f229ce5dfdb82fbf904d521"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a2dabb9996f229ce5dfdb82fbf904d521">empty</a> () const</td></tr>
<tr class="memdesc:a2dabb9996f229ce5dfdb82fbf904d521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether the trie is tracking any ledgers.  <a href="classripple_1_1LedgerTrie.html#a2dabb9996f229ce5dfdb82fbf904d521">More...</a><br /></td></tr>
<tr class="separator:a2dabb9996f229ce5dfdb82fbf904d521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0c7972c24677cb940b1cab04c70abc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#afd0c7972c24677cb940b1cab04c70abc">dump</a> (<a class="elRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::ostream</a> &amp;o) const</td></tr>
<tr class="memdesc:afd0c7972c24677cb940b1cab04c70abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump an ascii representation of the trie to the stream.  <a href="classripple_1_1LedgerTrie.html#afd0c7972c24677cb940b1cab04c70abc">More...</a><br /></td></tr>
<tr class="separator:afd0c7972c24677cb940b1cab04c70abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e57b86e3de6d1cf969b6a883742bf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classJson_1_1Value.html">Json::Value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a68e57b86e3de6d1cf969b6a883742bf2">getJson</a> () const</td></tr>
<tr class="memdesc:a68e57b86e3de6d1cf969b6a883742bf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump JSON representation of trie state.  <a href="classripple_1_1LedgerTrie.html#a68e57b86e3de6d1cf969b6a883742bf2">More...</a><br /></td></tr>
<tr class="separator:a68e57b86e3de6d1cf969b6a883742bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1528ebb53bf5d632a17092eb7cefb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#afc1528ebb53bf5d632a17092eb7cefb8">checkInvariants</a> () const</td></tr>
<tr class="memdesc:afc1528ebb53bf5d632a17092eb7cefb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the compressed trie and support invariants.  <a href="classripple_1_1LedgerTrie.html#afc1528ebb53bf5d632a17092eb7cefb8">More...</a><br /></td></tr>
<tr class="separator:afc1528ebb53bf5d632a17092eb7cefb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ad462534d71954a7ef419b5610314557b"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> = typename Ledger::Seq</td></tr>
<tr class="separator:ad462534d71954a7ef419b5610314557b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41d93aab5b84df2e1f24ed5d0baea7f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#ab41d93aab5b84df2e1f24ed5d0baea7f">ID</a> = typename Ledger::ID</td></tr>
<tr class="separator:ab41d93aab5b84df2e1f24ed5d0baea7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ce7d2d31f4ae1040733965cce01dee"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> = <a class="el" href="structripple_1_1ledger__trie__detail_1_1Node.html">ledger_trie_detail::Node</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;</td></tr>
<tr class="separator:ae3ce7d2d31f4ae1040733965cce01dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ba5db581320a655d9fd8e0cd19a729"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a11ba5db581320a655d9fd8e0cd19a729">Span</a> = <a class="el" href="classripple_1_1ledger__trie__detail_1_1Span.html">ledger_trie_detail::Span</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;</td></tr>
<tr class="separator:a11ba5db581320a655d9fd8e0cd19a729"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a60af5a4a37ee2d6f41bed188720a734c"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt; <a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> *, <a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a60af5a4a37ee2d6f41bed188720a734c">find</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger) const</td></tr>
<tr class="memdesc:a60af5a4a37ee2d6f41bed188720a734c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the node in the trie that represents the longest common ancestry with the given ledger.  <a href="classripple_1_1LedgerTrie.html#a60af5a4a37ee2d6f41bed188720a734c">More...</a><br /></td></tr>
<tr class="separator:a60af5a4a37ee2d6f41bed188720a734c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf33fde7c7b150fd3b809af4eacfc7fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#adf33fde7c7b150fd3b809af4eacfc7fc">findByLedgerID</a> (<a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;ledger, <a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> *parent=nullptr) const</td></tr>
<tr class="memdesc:adf33fde7c7b150fd3b809af4eacfc7fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the node in the trie with an exact match to the given ledger ID.  <a href="classripple_1_1LedgerTrie.html#adf33fde7c7b150fd3b809af4eacfc7fc">More...</a><br /></td></tr>
<tr class="separator:adf33fde7c7b150fd3b809af4eacfc7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a173ea4de993a18f05375b2d9f76f26b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a173ea4de993a18f05375b2d9f76f26b6">dumpImpl</a> (<a class="elRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::ostream</a> &amp;o, <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> &gt; const &amp;curr, int offset) const</td></tr>
<tr class="separator:a173ea4de993a18f05375b2d9f76f26b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a561f07091d0e839d9802f974a798d354"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#a561f07091d0e839d9802f974a798d354">root</a></td></tr>
<tr class="separator:a561f07091d0e839d9802f974a798d354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ee9a7592d27f4a6100efe8549d410b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/container/map.html">std::map</a>&lt; <a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a>, <a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classripple_1_1LedgerTrie.html#aa6ee9a7592d27f4a6100efe8549d410b">seqSupport</a></td></tr>
<tr class="separator:aa6ee9a7592d27f4a6100efe8549d410b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Ledger&gt;<br />
class ripple::LedgerTrie&lt; Ledger &gt;</h3>

<p>Ancestry trie of ledgers. </p>
<p>A compressed trie tree that maintains validation support of recent ledgers based on their ancestry.</p>
<p>The compressed trie structure comes from recognizing that ledger history can be viewed as a string over the alphabet of ledger ids. That is, a given ledger with sequence number <code>seq</code> defines a length <code>seq</code> string, with i-th entry equal to the id of the ancestor ledger with sequence number i. "Sequence" strings with a common prefix share those ancestor ledgers in common. Tracking this ancestry information and relations across all validated ledgers is done conveniently in a compressed trie. A node in the trie is an ancestor of all its children. If a parent node has sequence number <code>seq</code>, each child node has a different ledger starting at <code>seq+1</code>. The compression comes from the invariant that any non-root node with 0 tip support has either no children or multiple children. In other words, a non-root 0-tip-support node can be combined with its single child.</p>
<p>Each node has a tipSupport, which is the number of current validations for that particular ledger. The node's branch support is the sum of the tip support and the branch support of that node's children: </p><pre class="fragment">@code
node-&gt;branchSupport = node-&gt;tipSupport;
for (child : node-&gt;children)
   node-&gt;branchSupport += child-&gt;branchSupport;
@endcode
</pre><p>The templated <a class="el" href="classripple_1_1Ledger.html" title="Holds a ledger.">Ledger</a> type represents a ledger which has a unique history. It should be lightweight and cheap to copy.</p>
<div class="fragment"><div class="line"><span class="comment">// Identifier types that should be equality-comparable and copyable</span></div>
<div class="line"><span class="keyword">struct </span><a class="code" href="classripple_1_1LedgerTrie.html#ab41d93aab5b84df2e1f24ed5d0baea7f">ID</a>;</div>
<div class="line"><span class="keyword">struct </span><a class="code" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>Ledger</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">struct </span>MakeGenesis{};</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// The genesis ledger represents a ledger that prefixes all other</span></div>
<div class="line">   <span class="comment">// ledgers</span></div>
<div class="line">   Ledger(MakeGenesis{});</div>
<div class="line"> </div>
<div class="line">   Ledger(Ledger <span class="keyword">const</span>&amp;);</div>
<div class="line">   Ledger&amp; operator=(Ledger <span class="keyword">const</span>&amp;);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Return the sequence number of this ledger</span></div>
<div class="line">   <a class="code" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> seq() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Return the ID of this ledger&#39;s ancestor with given sequence number</span></div>
<div class="line">   <span class="comment">// or ID{0} if unknown</span></div>
<div class="line">   <a class="code" href="classripple_1_1LedgerTrie.html#ab41d93aab5b84df2e1f24ed5d0baea7f">ID</a></div>
<div class="line">   operator[](<a class="code" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> s);</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Return the sequence number of the first possible mismatching ancestor</span></div>
<div class="line"><span class="comment">// between two ledgers</span></div>
<div class="line"><a class="code" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a></div>
<div class="line"><a class="code" href="namespaceripple.html#a509e1a7f41988fd7a09eb0bf94795967">mismatch</a>(ledgerA, ledgerB);</div>
</div><!-- fragment --><p>The unique history invariant of ledgers requires any ledgers that agree on the id of a given sequence number agree on ALL ancestors before that ledger: </p><pre class="fragment">@code
Ledger a,b;
// For all Seq s:
if(a[s] == b[s]);
    for(Seq p = 0; p &lt; s; ++p)
        assert(a[p] == b[p]);
@endcode
</pre><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"><a class="el" href="classripple_1_1Ledger.html" title="Holds a ledger.">Ledger</a></td><td>A type representing a ledger and its history </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00347">347</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ad462534d71954a7ef419b5610314557b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad462534d71954a7ef419b5610314557b">&#9670;&nbsp;</a></span>Seq</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::<a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> =  typename Ledger::Seq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00349">349</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="ab41d93aab5b84df2e1f24ed5d0baea7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab41d93aab5b84df2e1f24ed5d0baea7f">&#9670;&nbsp;</a></span>ID</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::<a class="el" href="classripple_1_1LedgerTrie.html#ab41d93aab5b84df2e1f24ed5d0baea7f">ID</a> =  typename Ledger::ID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00350">350</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="ae3ce7d2d31f4ae1040733965cce01dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3ce7d2d31f4ae1040733965cce01dee">&#9670;&nbsp;</a></span>Node</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::<a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> =  <a class="el" href="structripple_1_1ledger__trie__detail_1_1Node.html">ledger_trie_detail::Node</a>&lt;<a class="el" href="classripple_1_1Ledger.html">Ledger</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00352">352</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a11ba5db581320a655d9fd8e0cd19a729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ba5db581320a655d9fd8e0cd19a729">&#9670;&nbsp;</a></span>Span</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::<a class="el" href="classripple_1_1LedgerTrie.html#a11ba5db581320a655d9fd8e0cd19a729">Span</a> =  <a class="el" href="classripple_1_1ledger__trie__detail_1_1Span.html">ledger_trie_detail::Span</a>&lt;<a class="el" href="classripple_1_1Ledger.html">Ledger</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00353">353</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1954c535064295e4e386a9c4542f6b73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1954c535064295e4e386a9c4542f6b73">&#9670;&nbsp;</a></span>LedgerTrie()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::<a class="el" href="classripple_1_1LedgerTrie.html">LedgerTrie</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00440">440</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a60af5a4a37ee2d6f41bed188720a734c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60af5a4a37ee2d6f41bed188720a734c">&#9670;&nbsp;</a></span>find()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/pair.html">std::pair</a>&lt;<a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a>*, <a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a>&gt; <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the node in the trie that represents the longest common ancestry with the given ledger. </p>
<dl class="section return"><dt>Returns</dt><dd>Pair of the found node and the sequence number of the first ledger difference. </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00369">369</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="adf33fde7c7b150fd3b809af4eacfc7fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf33fde7c7b150fd3b809af4eacfc7fc">&#9670;&nbsp;</a></span>findByLedgerID()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a>* <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::findByLedgerID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the node in the trie with an exact match to the given ledger ID. </p>
<dl class="section return"><dt>Returns</dt><dd>the found node or nullptr if an exact match was not found.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>O(n) since this searches all nodes until a match is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00407">407</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a173ea4de993a18f05375b2d9f76f26b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a173ea4de993a18f05375b2d9f76f26b6">&#9670;&nbsp;</a></span>dumpImpl()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::dumpImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::ostream</a> &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a> &gt; const &amp;&#160;</td>
          <td class="paramname"><em>curr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00423">423</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a83e81099b1cded82b5d679a80f646ae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e81099b1cded82b5d679a80f646ae2">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>count</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert and/or increment the support for the given ledger. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledger</td><td>A ledger and its ancestry </td></tr>
    <tr><td class="paramname">count</td><td>The count of support for this ledger </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00450">450</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="ae39438d885031f58c1045ad727823121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae39438d885031f58c1045ad727823121">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>&#160;</td>
          <td class="paramname"><em>count</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrease support for a ledger, removing and compressing if possible. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledger</td><td>The ledger history to remove </td></tr>
    <tr><td class="paramname">count</td><td>The amount of tip support to remove</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether a matching node was decremented and possibly removed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00536">536</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a6d723672c2cc27ee8815f4d3ce1d82eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d723672c2cc27ee8815f4d3ce1d82eb">&#9670;&nbsp;</a></span>tipSupport()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::tipSupport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return count of tip support for the specific ledger. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledger</td><td>The ledger to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of entries in the trie for this <em>exact</em> ledger </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00590">590</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="ab309fde8ae0efdd1945604cf12c7781e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab309fde8ae0efdd1945604cf12c7781e">&#9670;&nbsp;</a></span>branchSupport()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a> <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::branchSupport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1Ledger.html">Ledger</a> const &amp;&#160;</td>
          <td class="paramname"><em>ledger</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the count of branch support for the specific ledger. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ledger</td><td>The ledger to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of entries in the trie for this ledger or a descendant </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00604">604</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a3db8ef88a24566a57fe4711177e87da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db8ef88a24566a57fe4711177e87da8">&#9670;&nbsp;</a></span>getPreferred()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/utility/optional.html">std::optional</a>&lt;<a class="el" href="classripple_1_1SpanTip.html">SpanTip</a>&lt;<a class="el" href="classripple_1_1Ledger.html">Ledger</a>&gt; &gt; <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::getPreferred </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a> const&#160;</td>
          <td class="paramname"><em>largestIssued</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the preferred ledger ID. </p>
<p>The preferred ledger is used to determine the working ledger for consensus amongst competing alternatives.</p>
<p>Recall that each validator is normally validating a chain of ledgers, e.g. A-&gt;B-&gt;C-&gt;D. However, if due to network connectivity or other issues, validators generate different chains</p>
<div class="fragment"><div class="line">    /-&gt;C</div>
<div class="line">A-&gt;B</div>
<div class="line">    \-&gt;D-&gt;E</div>
</div><!-- fragment --><p>we need a way for validators to converge on the chain with the most support. We call this the preferred ledger. Intuitively, the idea is to be conservative and only switch to a different branch when you see enough peer validations to <em>know</em> another branch won't have preferred support.</p>
<p>The preferred ledger is found by walking this tree of validated ledgers starting from the common ancestor ledger.</p>
<p>At each sequence number, we have</p>
<ul>
<li>The prior sequence preferred ledger, e.g. B.</li>
<li>The (tip) support of ledgers with this sequence number,e.g. the number of validators whose last validation was for C or D.</li>
<li>The (branch) total support of all descendants of the current sequence number ledgers, e.g. the branch support of D is the tip support of D plus the tip support of E; the branch support of C is just the tip support of C.</li>
<li>The number of validators that have yet to validate a ledger with this sequence number (uncommitted support). Uncommitted includes all validators whose last sequence number is smaller than our last issued sequence number, since due to asynchrony, we may not have heard from those nodes yet.</li>
</ul>
<p>The preferred ledger for this sequence number is then the ledger with relative majority of support, where uncommitted support can be given to ANY ledger at that sequence number (including one not yet known). If no such preferred ledger exists, then the prior sequence preferred ledger is the overall preferred ledger.</p>
<p>In this example, for D to be preferred, the number of validators supporting it or a descendant must exceed the number of validators supporting C <em>plus</em> the current uncommitted support. This is because if all uncommitted validators end up validating C, that new support must be less than that for D to be preferred.</p>
<p>If a preferred ledger does exist, then we continue with the next sequence using that ledger as the root.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">largestIssued</td><td>The sequence number of the largest validation issued by this node. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair with the sequence number and ID of the preferred ledger or std::nullopt if no preferred ledger exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00678">678</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a2dabb9996f229ce5dfdb82fbf904d521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dabb9996f229ce5dfdb82fbf904d521">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return whether the trie is tracking any ledgers. </p>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00776">776</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="afd0c7972c24677cb940b1cab04c70abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd0c7972c24677cb940b1cab04c70abc">&#9670;&nbsp;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::dump </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::ostream</a> &amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump an ascii representation of the trie to the stream. </p>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00784">784</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="a68e57b86e3de6d1cf969b6a883742bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68e57b86e3de6d1cf969b6a883742bf2">&#9670;&nbsp;</a></span>getJson()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classJson_1_1Value.html">Json::Value</a> <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::getJson </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump JSON representation of trie state. </p>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00792">792</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="afc1528ebb53bf5d632a17092eb7cefb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1528ebb53bf5d632a17092eb7cefb8">&#9670;&nbsp;</a></span>checkInvariants()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::checkInvariants </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the compressed trie and support invariants. </p>

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00805">805</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a561f07091d0e839d9802f974a798d354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561f07091d0e839d9802f974a798d354">&#9670;&nbsp;</a></span>root</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;<a class="el" href="classripple_1_1LedgerTrie.html#ae3ce7d2d31f4ae1040733965cce01dee">Node</a>&gt; <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::root</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00357">357</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
<a id="aa6ee9a7592d27f4a6100efe8549d410b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ee9a7592d27f4a6100efe8549d410b">&#9670;&nbsp;</a></span>seqSupport</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Ledger &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/container/map.html">std::map</a>&lt;<a class="el" href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">Seq</a>, <a class="elRef" href="http://en.cppreference.com/w/cpp/types/integer.html">std::uint32_t</a>&gt; <a class="el" href="classripple_1_1LedgerTrie.html">ripple::LedgerTrie</a>&lt; <a class="el" href="classripple_1_1Ledger.html">Ledger</a> &gt;::seqSupport</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LedgerTrie_8h_source.html#l00360">360</a> of file <a class="el" href="LedgerTrie_8h_source.html">LedgerTrie.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespaceripple_html_a509e1a7f41988fd7a09eb0bf94795967"><div class="ttname"><a href="namespaceripple.html#a509e1a7f41988fd7a09eb0bf94795967">ripple::mismatch</a></div><div class="ttdeci">RCLValidatedLedger::Seq mismatch(RCLValidatedLedger const &amp;a, RCLValidatedLedger const &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="RCLValidations_8cpp_source.html#l00097">RCLValidations.cpp:97</a></div></div>
<div class="ttc" id="aclassripple_1_1LedgerTrie_html_ab41d93aab5b84df2e1f24ed5d0baea7f"><div class="ttname"><a href="classripple_1_1LedgerTrie.html#ab41d93aab5b84df2e1f24ed5d0baea7f">ripple::LedgerTrie::ID</a></div><div class="ttdeci">typename Ledger::ID ID</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTrie_8h_source.html#l00350">LedgerTrie.h:350</a></div></div>
<div class="ttc" id="aclassripple_1_1LedgerTrie_html_ad462534d71954a7ef419b5610314557b"><div class="ttname"><a href="classripple_1_1LedgerTrie.html#ad462534d71954a7ef419b5610314557b">ripple::LedgerTrie::Seq</a></div><div class="ttdeci">typename Ledger::Seq Seq</div><div class="ttdef"><b>Definition:</b> <a href="LedgerTrie_8h_source.html#l00349">LedgerTrie.h:349</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
